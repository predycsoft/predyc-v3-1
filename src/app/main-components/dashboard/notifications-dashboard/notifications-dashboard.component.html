<div class="fw" fxLayout="column">
    <div fxLayout="column" class="backWhite radius6 pd10 fw secondColumnItem">
        <div fxLayout="row" fxLayoutGap="1rem" fxLayoutAlign="start center" class="fw pdl05">
            <div class="iconContainer" fxLayoutAlign="center center">
                <img [src]="icon.notification" class="makeBlue" alt="">
            </div>
            <span class="ft12 gray-10 ft600 ">Notificaciones</span>
        </div>

        <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="1.5rem" class="fw pdr05">
            <div (click)="applyFilter('all')" class="positionRelative"
                [ngClass]="tabNotificaciones == 0?'chipBlueSelected ft11 ft500':'chipBlue ft500 ft11'">
                Todas
                <div class="dotAlerta ft500" fxLayoutAlign="center center">
                    {{totalNotifications}}
                </div>
            </div>
            <div (click)="applyFilter('alert')"
                [ngClass]="tabNotificaciones == 1?'chipBlueSelected ft11 ft500':'chipBlue ft500 ft11'">
                Alertas
            </div>
        </div>

        <div>
            <table mat-table [dataSource]="dataSource">
                <!-- Content Column -->
                <ng-container matColumnDef="content">
                    <td mat-cell *matCellDef="let notification"> 
                        <div fxLayout="row" fxLayoutGap="5px" fxLayoutAlign=" center">
                            <img [src]="notification.user?.photoURL" class="avatar2" alt=""
                                onerror="this.src='assets/images/default/default-user-image.jpg'">
                            <div class="ft10 gray-10">
                                {{ notification.user.displayName | titlecase }} {{notification.message}}
                            </div>
                        </div>
                    </td>
                </ng-container>
                <!-- Action Column -->
                <ng-container matColumnDef="action">
                    <td mat-cell *matCellDef="let notification" class="cursorPointer">
                        <div *ngIf="notification.type === 'alert'" (click)="sendMail(notification)">
                            <div *ngIf="!clickedNotifications[notification.id]">
                                <img [src]="icon.email" class="h20px" alt="">
                            </div>
                        </div> 
                        <div *ngIf="notification.type === 'activity'">
                            <div [routerLink]="['/management/students', notification.user.uid]" class="cursorPointer">
                                <img [src]="icon.panel" class="h20px" alt="">
                            </div>
                        </div> 
                        <div *ngIf="notification.type === 'request'">
                            <div [routerLink]="['/my-account']" [queryParams]="{ activeTab: 'soporte' }" class="cursorPointer">
                                <img [src]="icon.chat" class="h20px" alt="">
                            </div>
                        </div> 
                    </td>
                </ng-container>
                <!-- Check Column -->
                <ng-container matColumnDef="check">
                    <td mat-cell *matCellDef="let notification" [ngClass]="!notification.readByAdmin? 'cursorPointer' : ''"> 
                        <div *ngIf="!notification.readByAdmin" (click)="setRead(notification)">
                            <img [src]="icon.check" class="h20px" alt="">
                        </div>
                    </td>
                </ng-container>

                <tr mat-row *matRowDef="let notification; columns: displayedColumns;"></tr>
                <!-- Row shown when there is no matching data. -->
                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="4">No posees notificaciones en este momento</td>
                </tr>
            </table>
        </div>
    </div>
</div>