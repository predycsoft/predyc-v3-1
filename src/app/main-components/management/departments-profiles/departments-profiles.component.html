<app-navigate-back targetUrl="../">Departamentos y Perfiles</app-navigate-back>
<!-- <button class="blueButton" (click)="submitProfiles()">Click</button>
<button class="redButton" (click)="submitDepartments()">Click</button> -->
<div fxLayout="row" fxLayoutAlign="space-between center">
    <div fxLayout="row">
        <h6>Tus Departamentos</h6>
    </div>
    <div fxLayout="row" fxLayoutAlign="space-between end" fxLayoutGap="1rem">
        <app-search-input-box></app-search-input-box>
        <!-- <button (click)="createDepartmentsCollection()" class="yellowButton">Cable departamentos</button> -->
        <button class="yellowButton">Nuevo departamento</button>
    </div>
</div>
<div fxLayout="row" fxLayoutGap="1rem">
    <div class="containerLeft mgt03">
        <mat-chip-listbox class="mat-mdc-chip-set-stacked contenedor-chips" aria-label="Color selection">
            <mat-chip-option
                class="custom-chip"
                *ngFor="let chip of departments"
                [selected]="chipSelection.isSelected(chip.name)"
                (click)="onChipClick(chip.name)">
                {{chip.name}}
          </mat-chip-option>
        </mat-chip-listbox>
      </div>   
    <div class="containerRight mgt03">
    <table mat-table [dataSource]="dataSource" matSort>
        <ng-container matColumnDef="name">
            <mat-accordion>
            <td mat-cell *matCellDef="let department">
                <mat-expansion-panel
                [expanded]="chipSelection.isSelected(department.name)"
                (opened)="toggleAccordion(department.name)"
                (closed)="toggleAccordion(department.name)">
                <mat-expansion-panel-header>
                  <mat-panel-title (click)="$event.stopPropagation()" fxLayout="row" fxLayoutAlign="space-between center">
                    <div fxLayout="row" fxLayoutAlign="start center">
                        {{department.name}}
                    </div>
                    <div>
                        <img [src]="icon.licencias" class="h16px pdr05 edit cursorPointer" alt="">
                        <img [src]="icon.trash" class="h16px pdr05 trash cursorPointer" alt="">
                        <button (click)="createProfileDepartment(department)" class="blueButton radius4 ft12 h28px mgr10 gray-1" *ngIf="isPanelExpanded(department.name)">Nuevo perfil</button>
                    </div>
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <p>I'm visible because I am open</p>
              </mat-expansion-panel>
            </td>
            </mat-accordion>
        </ng-container>
        <tr mat-row *matRowDef="let department; columns: displayedColumns;"></tr>
        <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">No se han encontrado departamentos</td>
        </tr>
    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
    </div>
</div>
