<div class="mgt20 mgb20">
    <div fxLayout="row" fxLayoutAlign=" center">
        <h6 class="ft16 ft500 mgt0 mgb0"> Pagos </h6>
        <mat-icon (click)="openCreateChargeModal()" class="mgl10 gray-5 cursorPointer ft20 linkIcon">
            add_circle</mat-icon>
    </div>
    <div class="fw mgt15">
        <table mat-table [dataSource]="dataSource">
    
            <!-- Monto Column -->
            <ng-container matColumnDef="amount">
                <th mat-header-cell *matHeaderCellDef class="ft14 centertext"> Monto </th>
                <td mat-cell *matCellDef="let charge"> 
                    <div fxLayout="row" fxLayoutGap="20px" fxLayoutAlign=" center" >
                        <span *ngIf="charge.price && getChargePrice(charge).amount != charge.amount" class="ft11 gray-10 align-end mw line-th">
                            ${{getChargePrice(charge).amount | number:"1.2-2"}}
                        </span>
                        <div class="ft500 ft12 gray-10 w-50">{{ charge.amount | number:"1.2-2"}}</div>
                        <div class="ft500 ft12 gray-8 ftup">{{charge.currency}}</div>
                    </div>
                </td>
            </ng-container>
            
            <!-- Via de Column -->
            <ng-container matColumnDef="via">
                <th mat-header-cell *matHeaderCellDef class="ft14 centertext">Via</th>
                <td mat-cell *matCellDef="let charge" class="centertext ft12"> {{ charge.via}} </td>
            </ng-container>
    
            <!-- Estatus Column -->
            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef class="ft14 centertext">Estatus</th>
                <td mat-cell *matCellDef="let charge" class="centertext ft12"> 
                    <span *ngIf="charge.status == 'succeeded'" class="backGreen1 radius6 pd05 fw ft11 green-4">{{charge.status}}</span>
                    <span *ngIf="charge.status == 'pending'" class="backGray3 radius6 pd05 fw ft11 gray-8">{{charge.status}}</span>
                    <span *ngIf="charge.status == 'failed'" class="backRed1 radius6 pd05 fw ft11 red-5" [matTooltip]="charge.failureMessage">Failed</span>
                </td>
            </ng-container>
    
            <!-- Producto Column -->
            <ng-container matColumnDef="product">
                <th mat-header-cell *matHeaderCellDef class="ft14 centertext"> Producto</th>
                <td mat-cell *matCellDef="let charge" class="centertext ft12"> {{ charge.productName }} </td>
            </ng-container>
    
            <!-- Cantidad Column -->
            <ng-container matColumnDef="quantity">
                <th mat-header-cell *matHeaderCellDef class="ft14 centertext"> Cantidad</th>
                <td mat-cell *matCellDef="let charge" class="centertext ft12"> {{ charge.quantity }} </td>
            </ng-container>
    
            <!-- Descripción Column -->
            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef class="ft14 centertext"> Descripción</th>
                <td mat-cell *matCellDef="let charge" class="centertext ft12"> {{ charge.description }} </td>
            </ng-container>
    
            <!-- Fecha Column -->
            <ng-container matColumnDef="createdAt">
                <th mat-header-cell *matHeaderCellDef class="ft14 centertext">Fecha</th>
                <td mat-cell *matCellDef="let charge" class="centertext ft12"> {{ charge.createdAt | date:"dd/MM/yyyy"}} </td>
            </ng-container>
    
            <!-- Fecha pago Column -->
            <ng-container matColumnDef="payAt">
                <th mat-header-cell *matHeaderCellDef class="ft14 centertext">Fecha pago</th>
                <td mat-cell *matCellDef="let charge" class="centertext ft12"> {{ charge.payDate | date:"dd/MM/yyyy" }} </td>
            </ng-container>

            <!-- Metodo de pago de Column -->
            <ng-container matColumnDef="paymentMethod">
                <th mat-header-cell *matHeaderCellDef class="ft14 centertext">Método de pago</th>
                <td mat-cell *matCellDef="let charge" class="centertext ft12"> {{ charge.paymentMethod}} </td>
            </ng-container>
    
            <!-- Devolución Column -->
            <ng-container matColumnDef="refund">
                <th mat-header-cell *matHeaderCellDef class="ft14 centertext">Devolución</th>
                <td mat-cell *matCellDef="let charge" class="centertext ft12"> {{ charge.amountRefunded > 0 ? (charge.amountRefunded | number:"1.2-2") : null }} </td>
            </ng-container>
    
            <!-- Comentario Column -->
            <ng-container matColumnDef="comment">
                <th mat-header-cell *matHeaderCellDef class="ft14 centertext">Comentario</th>
                <td mat-cell *matCellDef="let charge" class="centertext ft12"> {{ charge.comment }} </td>
            </ng-container>        
    
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <ng-container>
                <tr
                    mat-row
                    *matRowDef="let charge; columns: displayedColumns;"
                    >
                </tr>
            </ng-container>
    
            <!-- Row shown when there is no matching data. -->
            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="11">No se han encontrado pagos para el criterio de busqueda</td>
            </tr>
        </table>
    </div>
</div>
  
  