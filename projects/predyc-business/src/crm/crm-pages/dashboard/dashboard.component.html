<div class="mgt05 mgl05 mgr05">
    <!-- <p class="ft600 ft16 gray-10">Pizarra</p> -->

    <div fxLayout="row" fxLayoutAlign="space-between center">
        <span class="ft600 ft16 gray-10">Pizarra</span>
        <button fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center" class="backBlue5 button-animation mgb10" style="border-radius: 24px !important;">
            <img [src]="icon.addNew" class="h16px pdr05 makeWhite" alt="">
            Nueva empresa
        </button>
    </div>


    <div class="kanban-board" fxLayout="row" fxLayoutAlign="space-between stretch">
        <div class="kanban-column" *ngFor="let column of columns" fxLayout="column" fxFlex="20">
          <div class="kanban-header" [ngStyle]="{'background-color': column.color}">
            {{ column.name }}( {{column.cards.length}} - {{column.total | currency:'USD':'symbol':'1.2-2' }})
          </div>
      
          <div class="kanban-content">
            <div *ngFor="let card of column.cards" class="lead-card">
                <ng-container *ngIf="card.type == 'lead'">
                    <div  class="leadCard">
                        <span *ngIf="!card['editingTitle']" (click)="card['editingTitle'] = true" class="ft14 ft500 cursorPointer" >{{card.title ? card.title : 'Sin titulo'}}</span>
                        <input (blur)="card['editingTitle'] = false; savelead(card)"  (keydown)="handleKeydown($event, card, 'editingTitle')"  *ngIf="card['editingTitle']"  type="text" [(ngModel)]="card.title" class="h32px ft14 shadow-animation pdl05 pdr05 radius4 borderLight fw" style="text-align: center;" />
                    </div>
                    <div class="contactoLead mgt05" fxLayout="column">
                        <div fxLayout="row" class="pdb05">
                            <span class="ft12">{{card.name | titlecase}}&nbsp;-&nbsp;{{card.empresa}}&nbsp;- &nbsp;{{card.cargo}}</span> 
                        </div>
                        <div fxLayout="row" fxLayoutAlign="space-between stretch">
                            <a (click)="copiarContacto('Correo copiado',card.email)" [href]="'mailto:' + card.email" class="ft12 blueLink">{{ card.email }}</a>
                            <a (click)="copiarContacto('TelÃ©fono copiado',card.telefono)" [href]="'https://wa.me/' + card.telefono" target="_blank" class="ft12 gray-10">Tel:&nbsp;{{ card.telefono }}</a>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="space-between center" class="pdt05">
                        <span>Valor:</span>
                        <!-- <input [(ngModel)]="card.valor" (blur)="savelead(card)" type="number"/> -->
                        <span *ngIf="!card['editingValor']" (click)="card['editingValor'] = true" class="cursorPointer" >{{ card.valor ? (card.valor | currency:'USD':'symbol':'1.2-2') : 'Sin valor establecido' }}</span>
                        <input (blur)="card['editingValor'] = false; savelead(card)" (keydown)="handleKeydown($event, card, 'editingValor')"  *ngIf="card['editingValor']"  type="number" [(ngModel)]="card.valor" class="h32px ft14 shadow-animation pdl05 pdr05 radius4 borderLight fw" style="text-align: center;" />
                    </div>

                    <div fxLayout="row" fxLayoutAlign="space-between center" class="pdt05">
                        <span>Producto:</span>
                        <!-- Select para elegir entre 'Empresa' o 'Independiente' -->
                        <span *ngIf="!card['editingProducto']" (click)="card['editingProducto'] = true" class="cursorPointer">
                            {{ card.interesUser ? (card.interesUser | titlecase) : 'Sin valor establecido' }}
                        </span>
                        <select (keydown)="handleKeydown($event, card, 'editingProducto')"  (blur)="card['editingProducto'] = false; savelead(card)" *ngIf="card['editingProducto']" [(ngModel)]="card.interesUser" class="h32px ft14 shadow-animation pdl05 pdr05 radius4 borderLight fw">
                            <option [ngValue]="'empresa'">Empresa</option>
                            <option [ngValue]="'individual'">Individual</option>
                        </select>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start start" class="pdt05">
                        <div fxLayout="column" fxFlex="20">
                            <span>Origen:</span>
                        </div>
                        <div fxLayout="column" fxFlex="80">
                            <span *ngIf="!card['editingOrigen']" (click)="card['editingOrigen'] = true" class="cursorPointer" style="text-align: right; display: block; overflow-wrap: break-word; max-width: 100%;">
                                {{ card.origen ? card.origen : 'Sin valor establecido' }}
                            </span>
                            <textarea cdkTextareaAutosize
                            #autosize="cdkTextareaAutosize"
                            cdkAutosizeMinRows="1"
                            cdkAutosizeMaxRows="99"
                            [(ngModel)]="card.origen"
                            (blur)="card['editingOrigen'] = false; savelead(card)"
                            *ngIf="card['editingOrigen']"></textarea>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="space-between center" class="pdt05">
                        <span>Fecha:</span>
                        <span>{{card.date.seconds * 1000 | date}}</span>
                    </div>
                </ng-container>
            </div>
          </div>

        </div>
    </div>
      

</div>    
