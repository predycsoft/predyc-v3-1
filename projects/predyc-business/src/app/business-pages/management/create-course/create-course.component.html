<div class="fw" class="fw backWhite radius10" fxLayout="column">    <div [ngClass]="true ? 'header--edit' : ''" fxLayout="row" fxLayoutAlign="space-between " class="header pdr10 pdl10">
    <div *ngIf="true;" fxLayout="row" fxLayoutAlign="space-between center" class="fw fh pdt05 pdb05" >
        <div class="radius20 pdl10 pdr10 mgr10 pdt05 pdb05 backWhite ft14 fh pdl05  " fxLayout="row" fxLayoutGap="8px" fxLayoutAlign=" center">
            <span class="input-box   ft14" placeholder="Nombre del curso"  >{{formNewCourse.get('titulo')?.value}}</span>
        </div>
        <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign=" center">
            <div class="radius20 pdl10 pdr10 pdt05 pdb05 backWhite ft14 cursorPointer" routerLink="/management/courses"> 
                Cancelar
            </div>
            <button
                fxLayout="row"
                fxLayoutGap="0.625"
                fxLayoutAlign="center center"
                class="blueButton ft14 cursorPointer"
                (click)="saveDraftPre()"
                style="border-radius: 24px !important;">
                {{mode !== 'edit' ? 'Agregar curso' : 'Editar curso'}}
                <img [src]="icon.save" class="h16px pdl05 makeWhite" alt="">
            </button>
        </div>
    </div>
</div>
    <div class="fw fh" fxLayout="column">
        <mat-tab-group class="swal-overlay" class="fw">
            <mat-tab label="Contenido del Curso">
                <ng-container>
                    <div fxLayout="row" class="containerCurso h-100" fxLayoutGap="1.5rem">
                        <!-- <div fxFlex="50%" class="pdl10 pdt10 fw"> -->
                        <div  class="radius10 w-30 mgt15  mgl10 shadowLight  hideScroll" fxLayout="column" style="background-color: rgba(244, 244, 244, 0.362); overflow-y: auto;">
                            <!-- Informacion -->
                                <form [formGroup]="formNewCourse" class="mgl10 mgt15 mgr10">
                                    <div class="fw" fxLayoutAlign="space-between center" fxLayout="row">
                                        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap=".5rem" class="">
                                            <img [src]="icon.presentationFile" class="makeBlue h20px" alt="">
                                            <span class="ft500 ft14 black " style="margin-top: 5px;">Informacion general del curso</span>
                                        </div>
                                    </div>
                                    <div class="form-group mgt08">
                                        <label class="ft12 " >Título</label>
                                        <input
                                        [class.is-invalid]="formNewCourse.controls['titulo'].errors && showErrorCurso"
                                        formControlName="titulo" type="text" class="form-control customInput radius6" placeholder="Escriba el título del curso aquí">
                                        <div class="invalid-feedback" *ngIf="formNewCourse.controls['titulo'].errors && showErrorCurso"> 
                                            Debe indicar el título del curso
                                        </div>
                                    </div>
                                    <!-- <div class="form-group pdt10">
                                        <label>Resumen del curso</label>
                                        <textarea 
                                        [class.is-invalid]="formNewCourse.controls['resumen'].errors && showErrorCurso"
                                        rows="3" formControlName="resumen" type="text" class="form-control customInput" placeholder="Escriba el resumen del curso aquí" style="resize: none;"></textarea>
                                        <div class="invalid-feedback" *ngIf="formNewCourse.controls['resumen'].errors && showErrorCurso"> 
                                            Debe indicar el resumen del curso
                                        </div>
                                    </div> -->
                                    <div class="ft12 form-group pdt10">
                                        <label>Descripción del curso</label>
                                        <textarea
                                        [class.is-invalid]="formNewCourse.controls['descripcion'].errors && showErrorCurso"
                                         rows="3"  formControlName="descripcion" type="text" class="form-control ft12  customInput" placeholder="Escriba la descripción del curso aquí" style="resize: none;"></textarea>
                                         <div class="invalid-feedback" *ngIf="formNewCourse.controls['descripcion'].errors && showErrorCurso"> 
                                            Debe indicar la descripción del curso
                                        </div>
                                    </div>
                                    <div class="form-group pdt10">
                                        <label class="ft12 "  >Foto del curso</label>
                                        <div class="image-selector">
                                            <!-- <button class="add-button">Adjuntar nueva</button> -->
                                            <button (click)="cursoImage.click()" class="grayButton radius6 ft12 ft500 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                <img [src]="icon.arrowUp" class="h16px pdr05" alt="">
                                                Adjuntar imagen
                                            </button>
                                            <input #cursoImage type="file" (change)="uploadCourseImage($event,'curso')" hidden accept="image/jpeg, image/png" />
                                            <!-- <div class="image-scroll">
                                                <img *ngFor="let imagen of imagenesCurso" (click)="seleccionarImagenCurso(imagen)" [src]="imagen" alt="Imagen seleccionada" class="image cursorPointer {{this.formNewCourse.get('imagen').value == imagen? 'img-active': ''}}">
                                            </div> -->
                                            <div class="image-scroll">
                                                <img *ngIf="formNewCourse.get('imagen').value" [src]="formNewCourse.get('imagen').value" alt="Imagen seleccionada" class="image ">
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="formNewCourse.controls['imagen'].errors && showErrorCurso" class="custom-invalid-feedback pdt05">
                                        Debe seleccionar o subir la imagen del curso
                                    </div>
                                    <div fxLayout="row" class="fw" fxLayoutGap="1rem">
                                        <div  fxFlex="50%" >
                                            <div class="form-group pdt10 ">
                                                <label class="ft12 ">Nivel del curso</label>
                                                <select
                                                [class.is-invalid]="formNewCourse.controls['nivel'].errors && showErrorCurso"
                                                class="form-control customInput radius10" formControlName="nivel">
                                                    <option value=null>Selecciona el nivel</option>
                                                    <option value="Básico">Básico</option>
                                                    <option value="Intermedio">Intermedio</option>
                                                    <option value="Avanzado">Avanzado</option>
                                                </select>
                                                <div class="invalid-feedback" *ngIf="formNewCourse.controls['nivel'].errors && showErrorCurso"> 
                                                    Debe seleccionar el nivel del curso
                                                </div>
                                            </div>
                                        </div>
                                        <div  fxFlex="50%" >
                                            <div class="form-group pdt10">
                                                <label class="ft12 ">Idioma</label>
                                                <select
                                                [class.is-invalid]="formNewCourse.controls['idioma'].errors && showErrorCurso"
                                                class="form-control customInput" formControlName="idioma">
                                                    <option value=null>Selecciona el idioma</option>
                                                    <option value="Español">Español</option>
                                                    <option value="Inglés">Inglés</option>
                                                </select>
                                                <div class="invalid-feedback" *ngIf="formNewCourse.controls['idioma'].errors && showErrorCurso"> 
                                                    Debe seleccionar el idioma del curso
                                                </div>
                                            </div>
                                        </div>
                                    </div>
        
                                    <!-- <div class="form-group pdt10">
                                        <label>A quién va dirigido</label>
                                        <textarea [class.is-invalid]="formNewCourse.controls['descripcion'].errors && showErrorCurso"
                                        rows="3"  formControlName="descripcion" type="text" class="form-control customInput" placeholder="Escriba a qué público va dirigido aquí" style="resize: none;"></textarea>
                                        <div class="invalid-feedback" *ngIf="formNewCourse.controls['descripcion'].errors && showErrorCurso"> 
                                            Debe indicar a qué público va dirigido aquí.
                                        </div>
                                    </div> -->
            
                                    <!-- <div class="form-group pdt10">
                                        <label>Qué aprenderas</label>
                                        <textarea rows="3" [class.is-invalid]="formNewCourse.controls['contenido'].errors && showErrorCurso"  formControlName="contenido" type="text" class="form-control customInput" placeholder="Escriba qué se aprenderá durante el curso." style="resize: none;"></textarea>
                                        <div class="invalid-feedback" *ngIf="formNewCourse.controls['contenido'].errors && showErrorCurso"> 
                                            Debe indicar que se aprenderá durante el curso.
                                        </div>
                                    </div> -->
                                    <div fxLayout="row" fxLayoutAlign=" center" class="mgt10 fw">
                                        <form class="fw">
                                            <mat-form-field class="example-full-width fw">
                                                <mat-label  >Buscar Pilar</mat-label>
                                                <input type="text"
                                                        class="ft14 fw"   
                                                        placeholder="Seleccione uno"
                                                        aria-label="Number"
                                                        matInput
                                                        #autoTrigger="matAutocompleteTrigger"
                                                        [formControl]="pillarsForm"
                                                        [matAutocomplete]="autoPillars">
                                                <mat-autocomplete [displayWith]="getOptionTextPillar" #autoPillars="matAutocomplete" class="options">
                                                <mat-option (click)="changePillar(option)" class="multiline-mat-option ft12" *ngFor="let option of filteredPillars | async" [value]="option">
                                                    <div fxLayout="row" fxLayoutAlign="space-between">
                                                    <div fxLayout="col" fxLayoutAlign="center center">
                                                        {{option.name | titlecase}}
                                                    </div>
                                                    </div>
                                                </mat-option>
                                                <mat-option  (click)="createPillar()" class="multiline-mat-option" value="null">Crear nuevo pilar</mat-option>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </form>
                                    </div>
                                    <div fxLayout="row" fxLayoutAlign=" center" class="fw">
                                        <div class="skills-container">
                                            <ng-container *ngFor="let skill of skillsCurso; let indexSkill = index">
                                                <div
                                                    style="display: inline-block; margin-right: 5px; margin-bottom: 5px;"
                                                    class="skill-badge-complete ListHover radius10 backGray2  ft12 pdl05 pdr05 gray-8 mgt05">
                                                    {{skill.name}}
                                                    <img style="cursor: pointer;" (click)="removeSkill(skill)" [src]="icon.close"  class="h16px makeGray"  alt="">
                                                </div>
                                            </ng-container>
                                            <div *ngIf="skillsCurso?.length<3 && pillarsForm.value" matTooltip="Agregar competencia"
                                            style="display: inline-block; margin-right: 5px; margin-bottom: 5px;"
                                               (click)="openModal(modalSkillsCourse,'md')" class="skill-badge ListHover2 radius10 backGray2 pdl05 pdr05 gray-8 mgt05">
                                                +
                                            </div>
                                        </div>
                                        <div *ngIf="formNewCourse.controls['skills'].errors && showErrorCurso" class="custom-invalid-feedback pdt05">
                                            Debe seleccionar al menos una competencia.
                                        </div>
                                    </div>
                                    <ng-container>
                                        <div fxLayout="row" fxLayoutAlign="center center" class="mgt10 fw">
                                          <div fxFlex="100">
                                            <form class="example-form">
                                              <mat-form-field class="example-full-width fw">
                                                <mat-label>Buscar Instructor</mat-label>
                                                <input type="text"
                                                    class="ft14 fw"   
                                                    placeholder="Seleccione uno"
                                                    aria-label="Number"
                                                    matInput
                                                    #autoTrigger="matAutocompleteTrigger"
                                                    [formControl]="instructoresForm"
                                                    [matAutocomplete]="autoInstructores">
                                                <mat-autocomplete [displayWith]="getOptionText" #autoInstructores="matAutocomplete" class="options">
                                                  <mat-option (click)="setInstructor(option)" class="multiline-mat-option" *ngFor="let option of filteredinstructores | async" [value]="option">
                                                    <div fxLayout="row" fxLayoutAlign="space-between">
                                                      <div fxLayout="col" fxLayoutAlign="center center" class="ft12">
                                                        {{option.nombre | titlecase}}
                                                      </div>
                                                    </div>
                                                  </mat-option>
                                                  <mat-option  (click)="createInstructor()" class="multiline-mat-option" value="null">Crear nuevo instructor</mat-option>
                                                </mat-autocomplete>
                                              </mat-form-field>
                                            </form>
                                            <div *ngIf="formNewCourse.controls['imagen_instructor'].errors && showErrorCurso" class="custom-invalid-feedback pdt05">
                                                Debe seleccinar el instructor
                                              </div>
                                          </div>
                                      
                                          <!-- Foto del instructor -->
                                          <!-- <div fxFlex="10" fxLayoutAlign=" center" class="avatar-selector pdb22 pdl10">
                                            <div class="avatar-scroll">
                                              <img *ngIf="formNewCourse.get('imagen_instructor').value" [src]="formNewCourse.get('imagen_instructor').value" alt="Imagen seleccionada" class="image shadow8">
                                            </div>
                                          </div> -->
                                        </div>
                                        
                                        <!-- Resto del formulario -->
                                        <div class="form-group">
                                          <label class=" ft14" >Resumen del instructor</label>
                                          <textarea rows="3" [class.is-invalid]="formNewCourse.controls['resumen_instructor'].errors && showErrorCurso" formControlName="resumen_instructor" type="text" class="form-control customInput" placeholder="Escriba el resumen del instructor aquí." style="resize: none;"></textarea>
                                          <div class="invalid-feedback" *ngIf="formNewCourse.controls['resumen_instructor'].errors && showErrorCurso"> 
                                              Debe indicar el resumen del instructor.
                                          </div>
                                        </div>
                                    </ng-container>
                                      
                                    
                                </form>
                        </div>
                        <div class="column w-70 mgr25" fxLayoutGap="2rem" >
                                <div  class=" mgt15  mgl10 fw" fxLayout="column">
                                    <div fxLayout="column" class=" radius10  fh hideScroll shadowLight" style="overflow-y: auto; background-color:rgba(244, 244, 244, 0.362) ">
                                        <div>
                                            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap=".5rem" class="mgl10 mgt15 mgr10">
                                                <img [src]="icon.document" class="makeBlue h20px" alt="">
                                                <span class="ft500 ft14 black " style="margin-top: 5px;">Contenido del curso</span>
                                            </div>
                                            <div class="pdl10 pdr10 pdt10 fw fh smallScroll modulesContainer" style="overflow-y: auto;">
                                                <div fxLayout="column" class="fw">
                                                    <!-- aqui van los modulos que se van creando -->
                                                    <div *ngFor="let modulo of modulos; let iModulo = index" class="{{modulo['isInvalid']? 'ContainerModuloInvalid' : 'ContainerModulo'}}">
                                                        <div fxLayout="row" fxLayoutAlign="space-between start" class="fw pd10 pdt05 pdb5">
                                                            <div fxLayout="row" fxLayoutGap="10px" class="fw">
                                                                <div class="ft500 ft12">
                                                                    <!-- numero del modulo -->
                                                                    Módulo {{modulo.numero}}:
                                                                </div>
                                                                <div class="ft12">
                                                                    <!-- nombre del modulo -->
                                                                    <img [src]="icon.document" class="h12px pdr05 makeGray" alt="">
                                                                    <div *ngIf="modulo.titulo && !modulo['editarTitulo']; then tituloPresente; else ModuloSinTitulo"></div>
                                                                    <ng-template #tituloPresente>
                                                                        <span (click)="modulo['editarTitulo'] = true;modulo['tituloTMP'] = modulo?.titulo">
                                                                            {{modulo.titulo}}
                                                                        </span>
                                                                        <!-- <img (click)="modulo['editarTitulo'] = true;modulo['tituloTMP'] = modulo?.titulo" [src]="icon.licencias" class="h18px pdl05 makeGray edit cursorPointer" alt=""> -->
                                                                    </ng-template>
                                                                    <ng-template #ModuloSinTitulo>
                                                                        <input #inputRefModulo *ngIf="!modulo.titulo" 
                                                                               type="text" 
                                                                               [(ngModel)]="modulo['tituloTMP']" 
                                                                               (keyup.enter)="confirmarTitulo(modulo)" 
                                                                               placeholder="Escriba título aquí" 
                                                                               class="inputInvisible">
                                                                        <input #inputRefModulo *ngIf="modulo.titulo" 
                                                                               type="text" 
                                                                               [(ngModel)]="modulo['tituloTMP']" 
                                                                               (keyup.enter)="confirmarTitulo(modulo)" 
                                                                               [value]="modulo.titulo" 
                                                                               placeholder="Escriba título aquí" 
                                                                               class="inputInvisible">
                                                                        <img (click)="confirmarTitulo(modulo)" 
                                                                             matTooltip="Confirmar título" 
                                                                             [src]="icon.check" 
                                                                             class="h18px pdl05 makeGray edit cursorPointer" 
                                                                             alt="">
                                                                    </ng-template>
                                                                </div>
                                                            </div>
                                                            <div fxLayout="row" fxLayoutAlign="space-between start" fxLayoutGap="0.625">
                                                                <img (click)="deleteModule(modulo)" [src]="icon.trash" class="h16px pdr05 cursorPointer trash" alt="">
                                                                <img *ngIf="modulo['expanded']" (click)="expandModulo(modulo); hideModuleClasses(modulo)" [src]="icon.chevronUp" class="h16px pdr05 cursorPointer" alt="">
                                                                <img *ngIf="!modulo['expanded']" (click)="expandModulo(modulo); hideOtherModules(modulo)" [src]="icon.chevronDown" class="h16px pdr05 cursorPointer" alt="">                                                       
                                                            </div>
                                                        </div>
                                                        <!-- Contenedor de las clases -->
                                                        <div *ngIf="modulo['expanded']">
                                                            <div *ngFor="let clase of modulo['clases']; trackBy: trackByClase; let iClase = index" fxLayout="row" class="fw">
                                                                <div class="mgl40 mgr10 fw">
                                                                    <div class="fw mgb10">
                                                                        <mat-accordion multi="false" class="fw">
                                                                            <mat-expansion-panel [ngClass]="{'ContainerClase': clase['isInvalid']}" [disabled]="!clase.titulo" [expanded]="clase['expanded']" (opened)="closeOtherClasesModulo(clase,modulo)">                                                                        
                                                                                <mat-expansion-panel-header>
                                                                                    <mat-panel-title (click)="onPanelTitleClick($event)" fxLayout="row" fxLayoutAlign="space-between center">
                                                                                        <div fxLayout="row" fxLayoutAlign="start center">
                                                                                        <img [src]="icon[getIconClase(clase.tipo)]" class="h18px pdr05" alt="">
                                                                                        <div *ngIf="clase.titulo && !clase['editarTitulo']; then tituloPresenteClase; else ClaseSinTitulo"></div>
                                                                                        <ng-template #tituloPresenteClase>
                                                                                            <span (click)="clase['editarTitulo'] = true; clase['tituloTMP'] = clase?.titulo; editarTituloClase(iClase)" >{{clase.tipo | titlecase }} {{getnumerClassTipo(modulo,clase)}}: {{clase.titulo}}</span>
                                                                                            <!-- <img (click)="clase['editarTitulo'] = true; clase['tituloTMP'] = clase?.titulo" [src]="icon.licencias" class="h18px pdl05 makeGray edit cursorPointer" alt=""> -->
                                                                                        </ng-template>
                                                                                        <ng-template #ClaseSinTitulo>
                                                                                            <span>{{clase.tipo | titlecase }} {{getnumerClassTipo(modulo,clase)}}:</span>
                                                                                            <input  #inputRef *ngIf="!clase.titulo" type="text" [(ngModel)]="clase['tituloTMP']" (keydown.space)="preventDefault($event)" (keyup.enter)="preventDefault($event);confirmarTituloClase(clase)" placeholder="Escriba título aquí" class="inputInvisible">
                                                                                            <input  #inputRef *ngIf="clase.titulo" type="text" [(ngModel)]="clase['tituloTMP']" (keydown.space)="preventDefault($event)" (keyup.enter)="preventDefault($event);confirmarTituloClase(clase)" placeholder="Escriba título aquí" class="inputInvisible">
                                                                                            <img (click)="confirmarTituloClase(clase)" matTooltip="Confirmar título" [src]="icon.check" class="h18px pdl05 makeGray edit cursorPointer" alt="">
                                                                                        </ng-template>
                                                                                        </div>
                                                                                        <img (click)="borrarClase(modulo,clase)" [src]="icon.trash" class="h16px pdr05 trash" alt="">
                                                                                    </mat-panel-title>
                                                                                </mat-expansion-panel-header>
                                                                                <!-- si es de archivo es un drop -->
                                                                                <ng-container *ngIf="clase.tipo != 'actividad' &&  clase.tipo !='corazones'">
                                                                                    <div *ngIf="!clase['uploading']" class="fw h80px ContainerFile">
                                                                                        <div (dragover)="onDragOver($event)" (drop)="onDrop($event,clase.tipo,clase,modulo)"class="fw fh no-select" fxLayout="row" fxLayoutAlign="center center">
                                                                                            Arrastrar y soltar el archivo aquí
                                                                                        </div>
                                                                                    </div>
                                                                                    <div *ngIf="clase['uploading']" class="fw h80px ContainerUpload" fxLayout="column" fxLayoutAlign="center center" cla>
                                                                                        <!-- Contenido principal -->
                                                                                        <div class="fw fh no-select" fxLayout="row" fxLayoutAlign="center center">
                                                                                            <!-- Nombre del archivo -->
                                                                                            <div *ngIf="clase.tipo == 'lectura'" fxFlex="35" class="ft700" fxLayoutAlign="center center">
                                                                                                <div [matTooltip]="clase.archivos[0].nombre" class="w-80" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" >
                                                                                                    {{clase.archivos[0].nombre}}
                                                                                                </div>
                                                                                            </div>
                                                                                            <div *ngIf="clase.tipo == 'video'" fxFlex="35" class="ft700" fxLayoutAlign="center center">
                                                                                                <div [matTooltip]="clase['videoFileName']" class="w-80" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" >
                                                                                                    {{clase['videoFileName']}}
                                                                                                </div>
                                                                                            </div>
                                                                                            
                                                                                            <!-- Barra de progreso File pdf-->
                                                                                            <div *ngIf="clase.tipo == 'lectura'"fxFlex="25" fxLayout="row" fxLayoutAlign="center center">
                                                                                                <mat-progress-bar class="h10px radius6 {{clase.archivos[0].uploading_file_progress >= 100? 'complete-progress-bar': ''}}" mode="determinate" [value]="clase.archivos[0].uploading_file_progress"></mat-progress-bar>
                                                                                                <span *ngIf="clase.archivos[0].uploading_file_progress < 100" class="pdl05">{{clase.archivos[0].uploading_file_progress}}%</span>
                                                                                                <img *ngIf="clase.archivos[0].uploading_file_progress>=100" [src]="icon.check" class="h16px pdl05" alt="">
                                                                                            </div>
                            
                                                                                            <!-- Barra de progreso File video-->
                                                                                            <div *ngIf="clase.tipo == 'video'" fxFlex="25" fxLayout="row" fxLayoutAlign="center center">
                                                                                                <mat-progress-bar class="h10px radius6 {{clase['videoUpload'] >= 100? 'complete-progress-bar':''}}" mode="determinate" [value]="clase['videoUpload']"></mat-progress-bar>
                                                                                                <span *ngIf="clase['videoUpload']<100" class="pdl05">{{clase['videoUpload']}}%</span>
                                                                                                <img *ngIf="clase['videoUpload']>=100" [src]="icon.check" class="h16px pdl05" alt="">
                                                                                            </div>
                                                                                            
                                                                                            <!-- Fecha -->
                                                                                            <div *ngIf="clase.tipo == 'lectura'" fxFlex="20" fxLayoutAlign="center center">
                                                                                                {{clase.archivos[0].id |  date:'dd/MM/yy' }}
                                                                                            </div>
                                                                                            <div *ngIf="clase.tipo == 'video'" fxFlex="20" fxLayoutAlign="center center">
                                                                                                {{clase.id |  date:'dd/MM/yy' }}
                                                                                            </div>
                                                                                            
                                                                                            <!-- Link para vista previa -->
                                                                                            <div (click)="structureActivity(modalClaseDetail, clase, modulo)" fxFlex="20" class="blueLink" fxLayoutAlign="center center">
                                                                                                Abrir vista previa
                                                                                            </div>
                                                                                        </div>
                                                                                        <div fxLayout="row" fxLayoutAlign="center center">
                                                                                            El archivo se esta procesando, no cierres esta ventana.
                                                                                        </div>
                                                                                    </div>
                                                                                    <div fxLayout="row" fxLayoutAlign="center center" class="mgt15 mgb05">
                                                                                        <button (click)="FileInput.click()" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                                                            <img [src]="icon.arrowUp" class="h16px pdr05" alt="">
                                                                                            {{ ((clase.tipo == 'lectura' && !clase.archivos[0]) || (clase.tipo == 'video' && !clase.vimeoId1))? 'Seleccionar archivo' : 'Remplazar archivo'}}
                                                                                        </button>
                                                                                        <button (click)="verVideoVimeo(clase)" *ngIf="clase.tipo == 'video' && clase.vimeoId1" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                                                            <img [src]="icon.playOutline" class="h16px pdr05" alt="">
                                                                                            Reproducir video
                                                                                        </button>
                                                                                        <button (click)="structureActivity(modalClaseDetail,clase,modulo)"  *ngIf="clase.archivos[0] || clase.tipo == 'video' && (clase['base64Video'] || clase.vimeoId1)" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                                                            <img [src]="icon.folderUp" class="h16px pdr05" alt="">
                                                                                            Añadir recursos
                                                                                        </button>
                                                                                        <!-- <button (click)="openModalAsignarCompetencia(modalAsignarCompetenciasClases,clase)" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                                                            <img [src]="icon.flash" class="h16px pdr05" alt="">
                                                                                            Seleccionar competencias
                                                                                        </button> -->
                                                                                        <ng-container *ngIf="clase.tipo == 'lectura'">
                                                                                            <!-- <button (click)="openModalAsignarCompetencia(modalAsignarCompetenciasClases,clase)" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                                                                <img [src]="icon.flash" class="h16px pdr05" alt="">
                                                                                                Seleccionar sas
                                                                                            </button> -->
                                                                                            <span class="pdr05">Duración:</span>
                                                                                            <div class="w-40"><input [(ngModel)]="clase.duracion" (change)="clase['edited'] = true" type="number" min="1" class="form-control customInput"></div>
                                                                                            <span class="pdl05">minutos</span>
                                                                                        </ng-container>
                                                                                        
                                                                                    </div>
                                                                                        <input (change)="onFileSelected($event,clase,false,modulo)" type="file" accept="{{clase.tipo == 'lectura'?'.pdf' : 'video/mp4'}}"  #FileInput style="display: none;">
                                                                                </ng-container>
                                                                                <ng-container *ngIf="clase.tipo == 'actividad' || clase.tipo == 'corazones' ">
                                                                                    <div fxLayout="row" fxLayoutAlign="center center" class="mgt15 mgb05">
                                                                                        <button (click)="structureActivity(modalActividadDetail,clase,modulo);showErrorActividad = false" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                                                            <img [src]="icon.taskAdd" class="h16px pdr05" alt="">
                                                                                            Estructurar actividad
                                                                                        </button>
                                                                                        <!-- <button (click)="openModalAsignarCompetencia(modalAsignarCompetenciasClases,clase)"class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                                                            <img [src]="icon.flash" class="h16px pdr05" alt="">
                                                                                            <ng-container *ngIf="clase.competencias && clase.competencias?.length == 0">
                                                                                                Agregar competencias
                                                                                            </ng-container>
                                                                                            <ng-container *ngIf="clase.competencias?.length> 0">
                                                                                                Cantidad competencias : {{clase.competencias.length}}
                                                                                            </ng-container>
                                                                                        </button> -->
                                                                                    </div>
                                                                                </ng-container>
                                                                                <ng-container *ngIf="clase['isInvalid']">
                                                                                    <div class="mgl05 mgr10 fw" *ngFor="let mensaje of clase['InvalidMessages']" fxLayoutAlign="start center">
                                                                                        <mat-icon class="red-5 ft16">info</mat-icon>
                                                                                        <span class="redText">{{mensaje}}</span>
                                                                                    </div>
                                                                                </ng-container>
                                                                            </mat-expansion-panel>
                                                                        </mat-accordion>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div *ngIf="!modulo['addClassMode']" fxLayout="row" class="fw">
                                                                <div class="mgl40 mgr10 fw">
                                                                    <div class="fw mgb10">
                                                                        <span  (click)="modulo['addClassMode'] = !modulo['addClassMode']" class="blueLink radius4 ft12 h28px no-select" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign=" center">
                                                                            <img [src]="icon.addNew" class="h12px pdr05 makeBlue" alt="">
                                                                            Agregar clase
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div *ngIf="modulo['addClassMode']" fxLayout="row" class="fw">
                                                                <div class="mgl40 mgr10 fw">
                                                                    <div class="fw mgb10">
                                                                        <div fxLayout="row" fxLayoutGap="0.625rem" fxLayoutAlign=" center">
                                                                            <span (click)="modulo['addClassMode'] = false">
                                                                                <img [src]="icon.close" class="h18px pdr05 makeRed" alt="">
                                                                            </span>
                                                                            <button (click)="addClase('lectura',modulo); modulo['addClassMode'] = false   " class="grayButton radius4 ft12 h28px gray-8">
                                                                                <img [src]="icon.addNew" class="h12px pdr05 makeGray8" alt="">
                                                                                Lectura
                                                                            </button>
                                                                            <button (click)="addClase('video',modulo); modulo['addClassMode'] = false   " class="grayButton radius4 ft12 h28px gray-8">
                                                                                <img [src]="icon.addNew" class="h12px pdr05 makeGray8" alt="">
                                                                                Video
                                                                            </button>
                                                                            <button (click)="addClase('actividad',modulo); modulo['addClassMode'] = false   " class="grayButton radius4 ft12 h28px gray-8">
                                                                                <img [src]="icon.addNew" class="h12px pdr05 makeGray8" alt="">
                                                                                Actividad
                                                                            </button>
                                                                            <button (click)="addClase('corazones',modulo); modulo['addClassMode'] = false   " class="grayButton radius4 ft12 h28px gray-8">
                                                                                <img [src]="icon.addNew" class="h12px pdr05 makeGray8" alt="">
                                                                                Corazones
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <ng-container *ngIf="modulo['isInvalid']">
                                                                <div class="mgl05 mgr10 fw" *ngFor="let mensaje of modulo['InvalidMessages']" fxLayoutAlign="start center">
                                                                    <mat-icon class="red-5 ft16">info</mat-icon>
                                                                    <span class="redText">{{mensaje}}</span>
                                                                </div>
                                                            </ng-container>
                                                        </div>
                                                    </div>
                                                    <div fxLayout="row">
                                                        <span (click)="addModulo()"  class="blueLink radius4 ft12 h28px no-select" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign=" center">
                                                            <img [src]="icon.addNew" class="h12px pdr05 makeBlue" alt="">
                                                            Agregar módulo
                                                        </span>
                                                    </div>
                                                    <ng-container *ngIf="isInvalidCases">
                                                        <div class="pdt05 fw" *ngFor="let mensaje of invalidMessages" fxLayoutAlign="start center">
                                                            <mat-icon class="red-5 ft16">info</mat-icon>
                                                            <span class="redText">{{mensaje}}</span>
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </div>
                    </div>
                </ng-container>
            </mat-tab>
            <mat-tab label="Examen">
                <!-- estoy aqui -->
                <div fxLayout="row" class="containerCurso h-100" fxLayoutGap="1.5rem">
                    <div fxLayout="column" class="radius10 w-50 mgt15  mgl10 shadowLight  hideScroll shadowLight" style="overflow-y: auto; background-color:rgba(244, 244, 244, 0.362) ">
                        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap=".5rem" class="mgl10 mgt15 mgr10">
                            <img [src]="icon.document" class="makeBlue h20px" alt="">
                            <span class="ft500 ft14 black " style="margin-top: 5px;">Examen del curso</span>
                        </div>
                        <app-questions class="mgr10" [questionMaxSize]="100" [nameCurso]="formNewCourse.get('titulo').value?  this.formNewCourse.get('titulo').value : 'Temporal'" [nameEmpresa]="empresa.name" (emmitForm)="validExam = $event" [questionsArray]="examen?.questions ? examen?.questions:[] " [checkQuestions]="updateTriggeQuestionsExam" [selectedTestSkills]="[]"></app-questions>
                    </div>

                    <div class="column w-70 mgr25" fxLayoutGap="2rem" >
                        <div  class=" mgt15  mgl10 fw" fxLayout="column">
                            <div fxLayout="column" class=" radius10  fh hideScroll shadowLight" style="overflow-y: auto; background-color:rgba(244, 244, 244, 0.362) ">
                                <div>
                                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap=".5rem" class="mgl10 mgt15 mgr10">
                                        <img [src]="icon.document" class="makeBlue h20px" alt="">
                                        <span class="ft500 ft14 black " style="margin-top: 5px;">Vista Previa Examen</span>
                                    </div>
                                    <div class="pdl10 pdr10 pdt10 fw fh smallScroll modulesContainer" style="overflow-y: auto;">
                                        <ng-container>
                                            <div fxFlex fxLayout="column" class="container pdl10 pdt10">
                                                <ng-container>
                                                    <!-- <div *ngFor="let question of examen['questions']; let questionIndex = index" class="{{question.isInvalid?'ContainerModuloInvalid':'ContainerModulo'}}"> -->
                                                    <div *ngFor="let question of []; let questionIndex = index" class="{{question.isInvalid?'ContainerModuloInvalid':'ContainerModulo'}}">
                                                        <div fxLayout="row" fxLayoutAlign="space-between start" class="fw pd05 pdb0">
                                                            <div fxLayout="row" fxLayoutGap="10px" class="fw">
                                                                <div class="ft500 ft12">
                                                                    Pregunta {{questionIndex+1}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="pd05">
                                                            <div fxLayout="row" fxLayoutAlign="space-between center">
                                                                <div fxLayout="row" fxLayoutGap="0.625">
                                                                    <div class="pdr05">
                                                                        {{ question.typeFormated.displayName }}
                                                                    </div>
                                                                </div>
                                                                <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="10px">
                                                                    <label>Puntos:</label>
                                                                    <span>{{question.points}}</span>
                                                                </div>
                                                            </div>
                                                        
                                                            <div fxLayout="row" class="pdt10">
                                                                <div *ngIf="question.image" fxFlex="30">
                                                                    <img [src]="question.image" alt="" class="w-90" style="max-height: 200px;">
                                                                </div>
                                                                
                                                                <div fxFlex="70" fxLayout="column" class="pdt05 fw">
                                                                    <div [innerHTML]="question.render" *ngIf="question.typeFormated.value == 'complete'">
                                                                    </div>
                                                        
                                                                    <div *ngIf="question.typeFormated.value == 'single_choice'">
                                                                        <span class="ft14 ft500"> {{ question.text }} </span>
                                                                        <div class="mgt10" fxLayout="column">
                                                                            <div fxLayout="row" fxLayoutAlign="space-between center" *ngFor="let option of question.options; let optionIndex = index" class="mgt05">
                                                                                <span class="pdr05">{{ optionIndex + 1 }}. {{ option.text }}</span>
                                                                                <input type="radio" [name]="questionIndex" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                        
                                                                    <div *ngIf="question.typeFormated.value == 'multiple_choice'">
                                                                        <span class="ft14 ft500"> {{ question.text }} </span>
                                                                        <div class="mgt10" fxLayout="column">
                                                                            <div fxLayout="row" fxLayoutAlign="space-between center" *ngFor="let option of question.options; let optionIndex = index" class="mgt05">
                                                                                <span class="pdr05">{{ optionIndex + 1 }}. {{ option.text }}</span>
                                                                                <input type="checkbox" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                        
                                                                    <div *ngIf="question.typeFormated.value == 'true-false'">
                                                                        <span class="ft14 ft500"> {{ question.text }} </span>
                                                                        <div class="mgt10" fxLayout="column">
                                                                            <div fxLayout="row" fxLayoutAlign="space-between center">
                                                                                <span fxFlex="60" class="ft14 ft500">Enunciado</span>
                                                                                <div class="centertext w200px">
                                                                                    <span fxFlex="50" class="ft14 ft500">V</span>
                                                                                    <span fxFlex="50" class="ft14 ft500">F</span>
                                                                                </div>
                                                                            </div>
                                                                            <div fxLayout="row" fxLayoutAlign="space-between center" class="mgt05" *ngFor="let option of question.options; let optionIndex = index">
                                                                                <div fxFlex="60" fxLayout="row" fxLayoutGap="1rem">
                                                                                    <span>{{ optionIndex + 1 }}. {{ option.text }}</span>
                                                                                </div>
                                                                                <div class="centertext w200px">
                                                                                    <input fxFlex="50" [name]="questionIndex.toString() + optionIndex.toString()" type="radio" [value]="true">
                                                                                    <input fxFlex="50" [name]="questionIndex.toString() + optionIndex.toString()" type="radio" [value]="false" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </ng-container>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-tab>
        </mat-tab-group>

    </div>
</div>

<!-- endCourseModal -->
<ng-template #endCourseModal let-modal>
    <div class="modal-header bg-web-primary text-white px-3 py-1">
        <div class="modal-title pd10" fxLayout="row" fxLayoutAlign="start center">
            <img [src]="icon.catalog" class="h18px pdr05" alt="">
            <span class="ft16 ft600 gray-10">¡Creaste un nuevo curso!</span>
        </div>
        <img style="cursor: pointer;" [src]="icon.close" (click)="modal.dismiss('Cross click')" class="h20px"  alt="">
    </div>
    <div class="modal-body">
        <div fxLayout="row" class="fw">
            <!-- Espacio para la imagen -->
            <div fxFlex="50" fxLayout="row" fxLayoutAlign="center center">
                <img src="../../../assets/images/cursos/teamwork high five-pana.svg" alt="Descripción" class="w-80">
            </div>
    
            <!-- Espacio para el texto y los botones -->
            <div fxFlex="50" fxLayout="column" fxLayoutAlign="center center">
                <!-- Texto encima de los botones -->
                <div class="text-center mb-3">
                    ¿Deseas publicar el curso?
                </div>
    
                <!-- Botones -->
                <div fxLayout="row" fxLayoutAlign="space-around center">
                    <button class="yellowButton radius4 ft12 h28px" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                        <img [src]="icon.save" class="h16px makeWhite pdr05" alt="">
                        Más tarde
                    </button>
                    <button class="blueButton radius4 ft12 h28px mgl10 gray-1" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                        Publicar
                        <img [src]="icon.send" class="h16px makeWhite pdl05" alt="">
                    </button>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<!-- CLASE DETAIL MODAL -->
<ng-template #modalClaseDetail let-modal>
    <div class="modal-header bg-web-primary text-white px-3 py-1">
        <div class="modal-title pd10 ">
            <img [src]="icon[getIconClase(selectedClase.tipo)]" class="h18px pdr05" alt="">
            <span class="ft16 ft600 gray-10">Vista previa {{selectedClase.tipo}} - {{selectedClase.titulo? selectedClase.titulo: 'sin título'}}</span>
        </div>
        <img style="cursor: pointer;" [src]="icon.close" (click)="modal.dismiss('Cross click')" class="h20px"  alt="">
    </div>
    <div class="modal-body">
        <div  fxLayout="row" fxLayoutGap="60px">
            <div fxFlex="40%" >
                <div fxLayout = "column" class="fw fh pdl20 pdt10">
                    <div fxLayout="row" class="pdb10">
                        <button  (click)="modal.dismiss()" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                            <img [src]="icon.chevronLeft" class="h16px pdr05" alt="">
                            Regresar
                        </button>     
                    </div>
                    <div fxLayout="row" class="pdb10">
                        <label>Titulo</label>
                    </div>
                    <!-- <div *ngIf="selectedClase.tipo == 'lectura'" (click)="base64view = selectedClase.archivos[0]['base64'];fileViewTipe = 'pdf'"  fxLayout="row" fxLayoutAlign="start center" class="pdb10 cursorPointer no-select"> -->
                    <div *ngIf="selectedClase.tipo == 'lectura'" (click)="seletFilePDF(selectedClase.archivos[0]);fileViewTipe = 'pdf'"  fxLayout="row" fxLayoutAlign="start center" class="pdb10 cursorPointer no-select">
                        <div fxLayout="column">
                            <img [src]="icon[getIconFileFormat(selectedClase.archivos[0].type)]" class="h32px pdr05" alt="">
                        </div>
                        <div fxLayout="column">
                            <span>{{selectedClase.archivos[0].nombre}}</span>
                            <span>Subido {{selectedClase.archivos[0].id |  customDate }}</span>
                        </div>
                    </div>
                    <div *ngIf="selectedClase.tipo == 'video'" (click)="base64view = selectedClase['base64Video'];fileViewTipe = 'video'"  fxLayout="row" fxLayoutAlign="start center" class="pdb10 cursorPointer no-select">
                        <div fxLayout="column">
                            <img [src]="icon[getIconFileFormat('video')]" class="h32px pdr05" alt="">
                        </div>
                        <div fxLayout="column">
                            <span>{{selectedClase['videoFileName']?selectedClase['videoFileName'] : selectedClase.titulo}}</span>
                            <!-- <span>Subido {{selectedClase.id |  customDate }}</span> -->
                        </div>
                    </div>
                    <div fxLayout="row" class="pdb10">
                        <label>Recursos adicionales</label>
                    </div>
                    <div fxLayout="column" class="pd10 backGray2 radius6" style=" height: 40vh !important; overflow-y: auto;">
                        <ng-container *ngFor="let archivo of selectedClase.archivos; let i = index">
                            <div *ngIf="i > (selectedClase.tipo == 'lectura'? 0:-1)" 
                                 (click)="seletFilePDF(archivo);fileViewTipe='pdf'" 
                                 fxLayout="row" 
                                 fxLayoutAlign="start center" 
                                 class="pdb10 cursorPointer">
                        
                                <div fxLayout="column">
                                    <img *ngIf="archivo.type == 'application/pdf'" [src]="icon.pdf" class="h32px pdr05" alt="">
                                </div>
                                <div fxLayout="column">
                                    <span>{{archivo.nombre}}</span>
                                    <span>Subido {{archivo.id | customDate }}</span>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                    <div fxLayout="row" class="pdb10 pdt10">
                        <input (change)="onFileSelected($event,selectedClase, false, selectedModulo, true)"  type="file" accept=".pdf"  #FileInputAdicional style="display: none;">
                        <button (click)="FileInputAdicional.click()" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                            <img [src]="icon.folderUp" class="h16px pdr05" alt="">
                            Añadir recursos
                        </button>
                    </div>
                </div>
            </div>
            <div fxFlex="60%">
                <div class="fh fw">
                    <ngx-extended-pdf-viewer *ngIf="fileViewTipe == 'pdf' && base64view " [showToolbar]="false" [base64Src]="base64view" [useBrowserLocale]="true" height="60vh"></ngx-extended-pdf-viewer>
                    <ngx-extended-pdf-viewer *ngIf="fileViewTipe == 'pdf' && srsView " [showToolbar]="false" [src]="srsView" [useBrowserLocale]="true" height="60vh"></ngx-extended-pdf-viewer>
                    <div class="video-container" *ngIf="fileViewTipe == 'video'">
                        <video *ngIf="base64view" #videoPlayer controls>
                            <!-- <source type="video/mp4" src="data:video/mp4;base64,{{base64view}}"> -->
                            <source [src]="base64view" type="video/mp4">
                        </video>
                        <iframe *ngIf="!base64view"
                            id="myvideo" [src]="safeUrl" (load)="initPlayer()" frameborder="0"
                            allow="autoplay; fullscreen; picture-in-picture" allowfullscreen>
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- <div class="modal-footer">
    </div> -->
</ng-template>

<!-- ACTIVIDAD DETAIL MODAL -->
<ng-template #modalActividadDetail let-modal>
    <div class="modal-header bg-web-primary text-white px-3 py-1">
        <div class="modal-title pd10 ">
            <img [src]="icon[getIconClase(selectedClase.tipo)]" class="h18px pdr05" alt="">
            <span class="ft16 ft600 gray-10">Vista previa {{selectedClase.tipo}} - {{selectedClase.titulo? selectedClase.titulo: 'sin título'}}</span>
        </div>
        <img style="cursor: pointer;" [src]="icon.close" (click)="modal.dismiss('Cross click')" class="h20px"  alt="">
    </div>
    <div class="modal-body">
        <div fxLayout="row">
            <div class="fw pdl10 pdr10 pdt10">
                <div class="fw">
                    <div class="stepper pdb10">
                        <div class="step" *ngFor="let item of stepsActividad; let i = index">
                            <div (click)="activeStepActividad > i ? activeStepActividad = i+1 : '' " class="no-select {{ activeStepActividad == i+1 ? 'titleActive ft400' : 'title'}}  {{  activeStepActividad > i ? 'cursorPointer' : ''}}">{{ item }}</div>
                            <div class="mgr05" *ngIf="i < stepsActividad.length - 1">
                                <img [src]="icon.chevronRight" class=" {{activeStepActividad == i+1? 'makeGray8': 'makeGray'}}" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div  fxLayout="row" fxLayoutGap="60px">
            <div fxFlex="75%" class="smallScroll" style="overflow-y: auto;">
                <div class="pdr05">
                    <!-- Informacion basica -->
                    <ng-container *ngIf="activeStepActividad == 1">
                        <div fxFlex fxLayout="column" class="container pdl10 pdt10">
                            <div fxLayout="row">
                                <span class="titleActive ft400">Información básica</span>
                            </div>
                            <div fxLayout="row">
                                <!-- formulario de avtividad -->
                                <form [formGroup]="formNuevaActividadBasica" class="mgr20 fw">
                                    <div class="form-group pdt10">
                                        <label>Título</label>
                                        <div class="position-relative custom-input-container">
                                            <img [src]="icon[getIconClase(selectedClase.tipo)]" class="h20px input-icon" alt="">
                                            <input formControlName="titulo"
                                                [class.is-invalid]="formNuevaActividadBasica.controls['titulo'].errors && showErrorActividad"
                                                type="text" 
                                                class="form-control customInput custom-input" placeholder="Escriba el título de la actividad aquí">
                                        </div>
                                        <div class="custom-invalid-feedback" *ngIf="formNuevaActividadBasica.controls['titulo'].errors && showErrorActividad"> 
                                            Debe indicar el título de la actividad
                                        </div>
                                    </div>
                                    <!-- <div class="form-group pdt10">
                                        <label>Descripción</label>
                                        <textarea rows="4" 
                                        [class.is-invalid]="formNuevaActividadBasica.controls['descripcion'].errors && showErrorActividad"
                                        formControlName="descripcion" type="text" class="form-control customInput" placeholder="Escriba una pequeña descripción" style="resize: none;"></textarea>
                                        <div class="invalid-feedback" *ngIf="formNuevaActividadBasica.controls['descripcion'].errors && showErrorActividad"> 
                                            Debe indicar la Descripción de la actividad
                                        </div>
                                    </div> -->
                                    <div class="form-group pdt10">
                                        <label>Recursos descargables (opcional)</label>
                                        <div class="position-relative custom-input-container">
                                            <img [src]="icon.pdf" class="h20px input-icon" alt="">
                                            <input 
                                            [class.is-invalid]="formNuevaActividadBasica.controls['recursos'].errors && showErrorActividad"
                                            (change)="onFileSelected($event,selectedClase,false,selectedModulo,true,'archivoActividad')" type="file" accept=".pdf" #fileActivityInput class="form-control customInput custom-input">
                                            <!-- <button class="custom-button ">Botón</button> -->
                                            <button (click)="fileActivityInput.click()" class="custom-button grayButton ft500 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                <img [src]="icon.arrowUp" class="h16px pdr05" alt="">
                                                Adjuntar
                                            </button>
                                        </div>
                                        <div class="custom-invalid-feedback" *ngIf="formNuevaActividadBasica.controls['recursos'].errors && showErrorActividad">
                                            Debe adjuntar algun recurso adicional
                                        </div>
                                    </div>
                                    <div *ngIf="selectedClase?.archivos[0]?.uploading_file_progress >0" class="form-group pdt10">
                                        <!-- Barra de progreso File video-->
                                        <div fxLayout="column">
                                            <div fxLayout="row" fxLayoutAlign="center center" class="w-25">
                                                <mat-progress-bar class="h10px radius6 {{selectedClase.archivos[0].uploading_file_progress >= 100? 'complete-progress-bar': ''}}" mode="determinate" [value]="selectedClase.archivos[0].uploading_file_progress"></mat-progress-bar>
                                                <span *ngIf="selectedClase.archivos[0].uploading_file_progress < 100" class="pdl05">{{selectedClase.archivos[0].uploading_file_progress}}%</span>
                                                <img *ngIf="selectedClase.archivos[0].uploading_file_progress>=100" [src]="icon.check" class="h16px pdl05" alt="">
                                            </div>
                                            <div fxLayout="row" *ngIf="selectedClase.archivos[0].uploading_file_progress>=100" >
                                                <span>{{selectedClase.archivos[0].nombre}}&nbsp;</span>
                                                <span (click)="viewFileActivity=!viewFileActivity" class="blueLink cursorPointer">{{viewFileActivity? 'Ocultar archivo':'Ver archivo'}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group pdt10 w-40">
                                        <label>Duración estimada (minutos)</label>
                                        <input formControlName="duracion"
                                        [class.is-invalid]="formNuevaActividadBasica.controls['duracion'].errors && showErrorActividad"
                                        type="number" min="1" class="form-control customInput">
                                        <div class="invalid-feedback" *ngIf="formNuevaActividadBasica.controls['duracion'].errors && showErrorActividad"> 
                                            Es obligatorio la duracion minima de al menos 1 minuto
                                        </div>
                                    </div>
                                </form>
                            </div>
    
                        </div>
                    </ng-container>
                    <!-- Instrucciones generales -->
                    <ng-container *ngIf=" activeStepActividad == 99"> 
                        <div fxFlex fxLayout="column" class="container pdl10 pdt10">
                            <div fxLayout="row">
                                <span class="titleActive ft400">Instrucciones generales de la actividad</span>
                            </div>
    
                            <div fxLayout="row" style="overflow-y: auto;">
    
                                <form [formGroup]="formNuevaActividadGeneral" class="mgr20 fw">
                                    <div class="form-group pdt10">
                                        <label>Video explicativo</label>
                                        <div class="position-relative custom-input-container">
                                            <img [src]="icon.videoChat" class="h20px input-icon" alt="">
                                            <input 
                                            [class.is-invalid]="formNuevaActividadGeneral.controls['video'].errors && showErrorActividad"
                                            (change)="onFileSelected($event,selectedClase,false,selectedModulo,false,'videoActividad')" type="file" accept="video/mp4"  #videoActivityInput class="form-control custom-input" placeholder="Escriba el título de la actividad aquí">
                                            <button (click)="videoActivityInput.click()" class="custom-button grayButton ft500 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                <img [src]="icon.arrowUp" class="h16px pdr05" alt="">
                                                Adjuntar
                                            </button>
                                        </div>
                                        <div class="custom-invalid-feedback" *ngIf="formNuevaActividadGeneral.controls['video'].errors && showErrorActividad">
                                            Debe adjuntar el video explcativo
                                        </div>
                                        <div>
                                            <span class="ft800 ft10">Nota:</span><span class="ft10">&nbsp;se recomienda que los videos tenga al menos una resolucion de 720P y pesen menso de 4 Gb</span>
                                        </div>
    
                                    </div>
                                    <div *ngIf="selectedClase['uploading'] && selectedClase['videoFileName']" class="form-group pdt10">
                                        <div fxLayout="column">
                                            <!-- Barra de progreso File video-->
                                            <div fxFlex="25" fxLayout="row" fxLayoutAlign="center center" class="w-25">
                                                <mat-progress-bar class="h10px radius6 {{selectedClase['videoUpload'] >= 100? 'complete-progress-bar':''}}" mode="determinate" [value]="selectedClase['videoUpload']"></mat-progress-bar>
                                                <span *ngIf="selectedClase['videoUpload']<100" class="pdl05">{{selectedClase['videoUpload']}}%</span>
                                                <img *ngIf="selectedClase['videoUpload']>=100" [src]="icon.check" class="h16px pdl05" alt="">
                                            </div>
                                            <div fxLayout="row" *ngIf="selectedClase.vimeoId1" >
                                                <span>{{selectedClase.videoFileName}}&nbsp;</span>
                                                <span (click)="viewVideoActivity=!viewVideoActivity;" class="blueLink cursorPointer">{{viewVideoActivity? 'Ocultar video':'Ver video'}}</span>
                                            </div>
                                        </div>
                                        <!-- <div *ngIf="viewVideoActivity">
                                            <div class="video-container-small">
                                                <video #videoPlayerMini controls>
                                                    <source type="video/mp4" src="data:video/mp4;base64,{{selectedClase['base64Video']}}">
                                                </video>
                                            </div>
                                        </div> -->
                                    </div>
                                    <!-- <div class="form-group pdt10">
                                        <label>Instrucciones</label>
                                        <textarea formControlName="instrucciones"
                                        [class.is-invalid]="formNuevaActividadGeneral.controls['instrucciones'].errors && showErrorActividad" 
                                        rows="3"  type="text" class="form-control customInput" placeholder="Escriba el resumen del curso aquí" style="resize: none;"></textarea>
                                        <div class="invalid-feedback" *ngIf="formNuevaActividadGeneral.controls['instrucciones'].errors && showErrorActividad">
                                            Debe indicar las instrucciones de la actividad.
                                        </div>
                                    </div> -->
    
                                    <!-- <div class="form-group pdt10">
                                        <label>Recursos descargables</label>
                                        <div class="position-relative custom-input-container">
                                            <img [src]="icon.pdf" class="h20px input-icon" alt="">
                                            <input 
                                            [class.is-invalid]="formNuevaActividadGeneral.controls['recursos'].errors && showErrorActividad"
                                            (change)="onFileSelected($event,selectedClase,false,selectedModulo,true,'archivoActividad')" type="file" accept=".pdf" #fileActivityInput class="form-control customInput custom-input">
                                            <button (click)="fileActivityInput.click()" class="custom-button grayButton ft500 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                <img [src]="icon.arrowUp" class="h16px pdr05" alt="">
                                                Adjuntar
                                            </button>
                                        </div>
                                        <div class="custom-invalid-feedback" *ngIf="formNuevaActividadGeneral.controls['recursos'].errors && showErrorActividad">
                                            Debe adjuntar algun recurso adicional
                                        </div>
                                    </div>
                                    <div *ngIf="selectedClase?.archivos[0]?.uploading_file_progress >0" class="form-group pdt10">
                                        <div fxLayout="column">
                                            <div fxLayout="row" fxLayoutAlign="center center" class="w-25">
                                                <mat-progress-bar class="h10px radius6 {{selectedClase.archivos[0].uploading_file_progress >= 100? 'complete-progress-bar': ''}}" mode="determinate" [value]="selectedClase.archivos[0].uploading_file_progress"></mat-progress-bar>
                                                <span *ngIf="selectedClase.archivos[0].uploading_file_progress < 100" class="pdl05">{{selectedClase.archivos[0].uploading_file_progress}}%</span>
                                                <img *ngIf="selectedClase.archivos[0].uploading_file_progress>=100" [src]="icon.check" class="h16px pdl05" alt="">
                                            </div>
                                            <div fxLayout="row" *ngIf="selectedClase.archivos[0].uploading_file_progress>=100" >
                                                <span>{{selectedClase.archivos[0].nombre}}&nbsp;</span>
                                                <span (click)="viewFileActivity=!viewFileActivity" class="blueLink cursorPointer">{{viewFileActivity? 'Ocultar archivo':'Ver archivo'}}</span>
                                            </div>
                                        </div>
                                    </div> -->
                                    <!-- <ngx-extended-pdf-viewer *ngIf="viewFileActivity" [showToolbar]="false" [base64Src]="selectedClase?.archivos[0]?.base64" [useBrowserLocale]="true" height="25vh"></ngx-extended-pdf-viewer> -->
                                </form>
                            </div>
                        </div>
                    </ng-container>
                    <!-- Preguntas -->
                    <ng-container *ngIf="activeStepActividad == 2">
                        <div fxFlex fxLayout="column" class="container pdl10 pdt10">
                            <ng-container *ngIf="false">
                                <!-- aqui van los preguntas que se van creando -->
                                <div *ngFor="let pregunta of selectedClase.activity.questions; let i = index" class="{{ pregunta.isInvalid ? 'ContainerModuloInvalid' : 'ContainerModulo' }}">
                                    <div fxLayout="row" fxLayoutAlign="space-between start" class="fw pd10 pdt05 pdb5">
                                        <div fxLayout="row" fxLayoutGap="10px" class="fw">
                                            <div class="ft500 ft12">
                                                <!-- numero pregunta -->
                                                Pregunta {{i+1}}
                                            </div>
                                            <div class="ft12">
                                                <!-- nombre pregunta -->
                                                <!-- <img [src]="icon.document" class="h12px pdr05 makeGray" alt="">
                                                <span>
                                                    {{pregunta.title? pregunta.title :'Pregunta sin titulo'}}
                                                </span> -->
                                            </div>
                                        </div>
                                        <div fxLayout="row" fxLayoutAlign="space-between start" fxLayoutGap="0.625">
                                            <img (click)="borrarPregunta(pregunta,i)" [src]="icon.trash" class="h16px pdr05 cursorPointer trash" alt="">
                                            <img *ngIf="pregunta['expanded']" (click)="pregunta['expanded'] = !pregunta['expanded'];" [src]="icon.chevronUp" class="h16px pdr05 cursorPointer" alt="">
                                            <img *ngIf="!pregunta['expanded']" (click)="pregunta['expanded'] = !pregunta['expanded']; hideOtherQuestion(pregunta);" [src]="icon.chevronDown" class="h16px pdr05 cursorPointer" alt="">
                                        </div>
                                    </div>
                                    <div *ngIf="pregunta['expanded']" class="pd10">
                                        <!-- <div fxLayout="row" fxLayoutAlign="space-between center">
                                            <div fxLayout="row" fxLayoutGap="0.625">
                                                <div *ngFor="let questionType of questionTypes" class="pdr05">
                                                    <button (click)="onQuestionTypeChange(pregunta, questionType.value)" class="{{pregunta.type.value == questionType.value ? 'backGray4': 'grayButton' }} radius4 ft12 h28px gray-8">{{ questionType.displayName }}</button>
                                                </div>
                                            </div>
                                            
                                            <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="10px">
                                                <label>Puntos</label>
                                                <input [(ngModel)]="pregunta.points" type="number" min="0" class="form-control customInput w-25">
                                            </div>
                                        </div> -->
                                        <!-- <div fxLayout="row" fxLayoutAlign="start center" class="pdt10">
                                            <button (click)="questionImage.click()" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                <img [src]="icon.arrowUp" class="h16px pdr05" alt="">
                                                Adjuntar imagen
                                            </button>
                                            <input #questionImage type="file" (change)="uploadQuestionImage($event,pregunta)" hidden accept="image/webp" />
                                        </div>
                                        <div *ngIf="pregunta.uploading_file_progress >0" class="form-group pdt10">
                                            <div fxLayout="column">
                                                <div fxLayout="row" fxLayoutAlign="center center" class="w-25">
                                                    <mat-progress-bar class="h10px radius6 {{pregunta.uploading_file_progress >= 100? 'complete-progress-bar': ''}}" mode="determinate" [value]="pregunta.uploading_file_progress"></mat-progress-bar>
                                                    <span *ngIf="pregunta.uploading_file_progress < 100" class="pdl05">{{pregunta.uploading_file_progress}}%</span>
                                                    <img *ngIf="pregunta.uploading_file_progress>=100" [src]="icon.check" class="h16px pdl05" alt="">
                                                </div>
                                                <div fxLayout="row" *ngIf="pregunta.uploading_file_progress>=100" >
                                                    <span>{{pregunta.fileName}}&nbsp;</span>
                                                    <span (click)="pregunta['imageHidden'] =!pregunta['imageHidden'] " class="blueLink cursorPointer">{{ pregunta['imageHidden']? 'Ocultar archivo':'Ver archivo'}}</span>
                                                    <img (click)="deleteQuestionImage(pregunta,true)" [src]="icon.close" class="h18px pdr05 makeRed cursorPointer" alt="">
                                                 </div>
                                                <div fxLayout="row" *ngIf="pregunta['imageHidden']" >
                                                    <img [src]="pregunta.image" style="max-height: 200px;">
                                                </div>
                                            </div>
                                        </div>
                                        <div fxLayout="row">
                                            <div class="form-group pdt10 fw">
                                                <textarea [(ngModel)]="pregunta.text" rows="3"  type="text" class="form-control customInput" placeholder="Escriba aqui la pregunta" style="resize: none;"></textarea>
                                                <div class="invalid-feedback">
                                                    Debe indicar la pregunta.
                                                </div>
                                            </div>
                                        </div>
                                        <div fxLayout="row" class="pdt05">
                                            <span [innerHTML]="questionInstruction(pregunta)"></span>
                                        </div> -->
                                        <div fxLayout="row" class="pdt05 fw">
                                            <!-- complete -->
                                            <!-- <div class="fw" fxLayout="column" *ngIf="pregunta.type.value == questionTypesIn.TYPE_COMPLETE_VALUE">
                                                <div fxLayout="row" class="mgt10">
                                                    <span>Haga click en confirmar cuando haya terminado de escribir la pregunta</span>
                                                </div>
                                                <div fxLayout="row" class="pdt05 pdb05">
                                                    <button (click)="parseQuestionText(pregunta)" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                        <img [src]="icon.check" class="h16px pdr05" alt="">
                                                        Confirmar
                                                    </button>
                                                </div>
                                                <div *ngFor="let placeHolder of pregunta.placeHolders; let i = index" class="ContainerModulo fw pd05">
        
                                                    <div fxLayout="row" fxLayoutAlign="start center">
                                                        {{i+1}}. {{placeHolder}}
                                                    </div>
                                                
                                                    <div fxLayout="column">
                                                        <div fxLayout="row" class="pdb05">
                                                            <span class="gray-8 ft700">Opciones</span>
                                                        </div>
                                                        <div *ngFor="let option of pregunta.options; let optIndex = index" fxLayout="row">
    
                                                            <div *ngIf="option.placeholder == placeHolder" fxLayout="row" fxLayoutAlign="space-between center" class="fw pdb05">
    
                                                                <input [(ngModel)]="option.text" type="text" class="form-control customInput w-40" placeholder="">
                                                                <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="5px">
                                                                    <input (change)="toggleOptionValue(pregunta,optIndex)" [checked]="option.isCorrect" type="checkbox" value="{{ optIndex }}"/>
                                                                    <img (click)="deleteOption(pregunta,optIndex)" [src]="icon.trash" class="h16px pdr05 cursorPointer trash pdl05" alt="">
                                                                </div>
                
                                                            </div>
                                                        
                                                        </div>
                                                        <div fxLayout="row">
                                                            <span (click)="addChoice(pregunta,placeHolder)" class="blueLink radius4 ft12 h28px no-select">
                                                                <img [src]="icon.addNew" class="h12px pdr05 makeBlue" alt="">
                                                                Agregar opción
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div *ngIf="pregunta.placeHolders?.length>0">
                                                    <button (click)="showDisplayText(pregunta)" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                                                        <img [src]="icon.check" class="h16px pdr05" alt="">
                                                        Renderizar pregunta
                                                    </button>
                                                </div>
                                                <div class="gray-8 ft12 pdt10" [innerHTML]="pregunta.render" *ngIf="pregunta.render"></div>
                                            </div> -->
                                            <!-- multiple choice -->
                                            <!-- <div class="fw" fxLayout="column" *ngIf="pregunta.type.value == questionTypesIn.TYPE_MULTIPLE_CHOICE_VALUE">
                                                <div *ngFor="let option of pregunta.options; let optIndex = index" fxLayout="row" class="fw">
                                                    <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="1rem" class="mgb10 fw">
                                                
                                                        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="5px">
                                                            <span class="gray-6">{{ optIndex + 1 }}.</span>
                                                            <input [(ngModel)]="option.text" type="text" class="form-control customInput" placeholder="">
                                                        </div>
                                                
                                                        <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="5px">
                                                            <input (change)="toggleOptionValue(pregunta,optIndex)" [checked]="option.isCorrect" type="checkbox" value="{{ optIndex }}"/>
                                                            <img (click)="deleteOption(pregunta,optIndex)" [src]="icon.trash" class="h16px pdr05 cursorPointer trash pdl05" alt="">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div fxLayout="row">
                                                    <span (click)="addChoice(pregunta)" class="blueLink radius4 ft12 h28px no-select">
                                                        <img [src]="icon.addNew" class="h12px pdr05 makeBlue" alt="">
                                                        Agregar opción
                                                    </span>
                                                </div>
                                            </div> -->
                                            <!-- single choice -->
                                            <!-- <div class="fw" fxLayout="column" *ngIf="pregunta.type.value == questionTypesIn.TYPE_SINGLE_CHOICE_VALUE">
                                                <div *ngFor="let option of pregunta.options; let optIndex = index" fxLayout="row" class="fw">
                                                    <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="1rem" class="mgb10 fw">
                                                        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="5px">
                                                            <span class="gray-6">{{ optIndex + 1 }}.</span>
                                                            <input [(ngModel)]="option.text" type="text" class="form-control customInput" placeholder="">
                                                        </div>
                                                
                                                        <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="5px">
                                                            <input [(ngModel)]="pregunta['correctOption']" name="radio" type="radio" (change)="changeCorrectOption(pregunta,optIndex)" [value]="optIndex"/>
                                                            <img (click)="deleteOption(pregunta,optIndex)" [src]="icon.trash" class="h16px pdr05 cursorPointer trash pdl05" alt="">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div fxLayout="row">
                                                    <span (click)="addChoice(pregunta)" class="blueLink radius4 ft12 h28px no-select">
                                                        <img [src]="icon.addNew" class="h12px pdr05 makeBlue" alt="">
                                                        Agregar opción
                                                    </span>
                                                </div>
                                            </div> -->
                                            <!-- true or false -->
                                            <!-- <div class="fw" fxLayout="column" *ngIf="pregunta.type.value == questionTypesIn.TYPE_TRUE_OR_FALSE_VALUE">
                                                <div *ngFor="let option of pregunta.options; let optIndex = index" fxLayout="row" class="fw">
                                                    <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="1rem" class="mgb10 fw">
                                                        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="5px">
                                                            <span class="gray-6">{{ optIndex + 1 }}.</span>
                                                            <input [(ngModel)]="option.text" type="text" class="form-control customInput" placeholder="">
                                                        </div>
                                                        <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="5px">
                                                            <input (change)="toggleOptionValue(pregunta,optIndex)" [checked]="option.isCorrect" type="checkbox" value="{{ optIndex }}"/>
                                                            <img (click)="deleteOption(pregunta,optIndex)" [src]="icon.trash" class="h16px pdr05 cursorPointer trash pdl05" alt="">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div fxLayout="row">
                                                    <span (click)="addChoice(pregunta)" class="blueLink radius4 ft12 h28px no-select">
                                                        <img [src]="icon.addNew" class="h12px pdr05 makeBlue" alt="">
                                                        Agregar opción
                                                    </span>
                                                </div>
                                            </div> -->
                                        </div>
                                        <ng-container *ngIf="pregunta.isInvalid">
                                            <div fxLayout="row" *ngFor="let mensaje of pregunta.InvalidMessages" fxLayoutAlign="start center">
                                                <mat-icon class="red-5 ft16">info</mat-icon>
                                                <span class="redText">{{mensaje}}</span>
                                            </div>
                                        </ng-container>
                                    </div>
                                </div>
                            </ng-container>
                            <app-questions  [nameCurso]="formNewCourse.get('titulo').value?  this.formNewCourse.get('titulo').value : 'Temporal'" [nameEmpresa]="empresa.name" (emmitForm)="validActividad = $event"  [heartsActivity]="selectedClase.tipo == 'corazones'? true: false" [questionsArray]="selectedClase?.activity?.questions ? selectedClase.activity.questions:[] " [checkQuestions]="updateTriggeQuestions" [selectedTestSkills]="competenciasSelectedClaseFormated"></app-questions>
                            <!-- <div fxLayout="row" class="fw">
                                <div class="mgl40 mgr10 fw">
                                    <div class="fw mgb10">
                                        <span (click)="crearPreguntaActividad()" class="yellowLink radius4 ft12 h28px no-select" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign=" center">
                                            <img [src]="icon.addNew" class="h12px pdr05 makeYellow" alt="">
                                            Agregar pregunta
                                        </span>
                                    </div>
                                </div>
                            </div> -->
                        </div>
                    </ng-container>
                    <!-- tab vista actividad -->
                    <ng-container *ngIf="activeStepActividad == 100">
                        <div fxFlex fxLayout="column" class="container pdl10 pdt10">
                            <ng-container>
                                <!-- aqui van los preguntas que se van creando -->
                                <div *ngFor="let question of selectedClase.activity.questions; let questionIndex = index" class="{{question.isInvalid?'ContainerModuloInvalid':'ContainerModulo'}}">
                                    <div fxLayout="row" fxLayoutAlign="space-between start" class="fw pd05 pdb0">
                                        <div fxLayout="row" fxLayoutGap="10px" class="fw">
                                            <div class="ft500 ft12">
                                                <!-- numero pregunta -->
                                                Pregunta {{questionIndex+1}}
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Contenedor de las preguntas -->
                                    <div class="pd05">
                                        <div fxLayout="row" fxLayoutAlign="space-between center">
                                            <div fxLayout="row" fxLayoutGap="0.625">
                                                <div class="pdr05">
                                                    {{ question.typeFormated.displayName }}
                                                </div>
                                            </div>
                                            <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="10px">
                                                <label>Puntos:</label>
                                                <span>{{question.points}}</span>
                                            </div>
                                        </div>
                                    
                                        <div fxLayout="row" class="pdt10">
                                            <!-- imagen -->
                                            <div *ngIf="question.image && !(question.image?.url)" fxFlex="30">
                                                <img [src]="question.image" alt="" class="w-90" style="max-height: 200px;">
                                            </div>

                                            <!-- imagen -->
                                            <div *ngIf="question.image?.url" fxFlex="30">
                                                <img [src]="question.image?.url" alt="" class="w-90" style="max-height: 200px;">
                                            </div>
                                            
                                            <!-- area dependiente de la pregunta -->
                                            <div fxFlex="70" fxLayout="column" class="pdt05 fw">
                                                <div [innerHTML]="question.render" *ngIf="question.typeFormated.value == 'complete'">
                                                </div>
                                    
                                                <div *ngIf="question.typeFormated.value == 'single_choice'">
                                                    <span class="ft14 ft500"> {{ question.text }} </span>
                                                    <div class="mgt10" fxLayout="column">
                                                        <div fxLayout="row" fxLayoutAlign="space-between center" *ngFor="let option of question.options; let optionIndex = index" class="mgt05">
                                                            <span class="pdr05">{{ optionIndex + 1 }}. {{ option.text }}</span>
                                                            <input type="radio" [name]="questionIndex" />
                                                        </div>
                                                    </div>
                                                </div>
                                    
                                                <div *ngIf="question.typeFormated.value == 'multiple_choice'">
                                                    <span class="ft14 ft500"> {{ question.text }} </span>
                                                    <div class="mgt10" fxLayout="column">
                                                        <div fxLayout="row" fxLayoutAlign="space-between center" *ngFor="let option of question.options; let optionIndex = index" class="mgt05">
                                                            <span class="pdr05">{{ optionIndex + 1 }}. {{ option.text }}</span>
                                                            <input type="checkbox" />
                                                        </div>
                                                    </div>
                                                </div>
                                    
                                                <div *ngIf="question.typeFormated.value == 'true-false'">
                                                    <span class="ft14 ft500"> {{ question.text }} </span>
                                                    <div class="mgt10" fxLayout="column">
                                                        <div fxLayout="row" fxLayoutAlign="space-between center">
                                                            <span fxFlex="60" class="ft14 ft500">Enunciado</span>
                                                            <div class="centertext w200px">
                                                                <span fxFlex="50" class="ft14 ft500">V</span>
                                                                <span fxFlex="50" class="ft14 ft500">F</span>
                                                            </div>
                                                        </div>
                                                        <div fxLayout="row" fxLayoutAlign="space-between center" class="mgt05" *ngFor="let option of question.options; let optionIndex = index">
                                                            <div fxFlex="60" fxLayout="row" fxLayoutGap="1rem">
                                                                <span>{{ optionIndex + 1 }}. {{ option.text }}</span>
                                                            </div>
                                                            <div class="centertext w200px">
                                                                <input fxFlex="50" [name]="questionIndex.toString() + optionIndex.toString()" type="radio" [value]="true">
                                                                <input fxFlex="50" [name]="questionIndex.toString() + optionIndex.toString()" type="radio" [value]="false" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    
                                </div>
                            </ng-container>
                        </div>
                    </ng-container>
                </div>
            </div>
            <div fxFlex="25%" fxLayout="column" fxLayoutAlign="center center">
                <div *ngIf="viewVideoActivity" class="video-container-small">
                    <video #videoPlayerMini controls class="fw fh">
                        <!-- <source type="video/mp4" src="data:video/mp4;base64,{{selectedClase['base64Video']}}"> -->
                        <source [src]="selectedClase['base64Video']" type="video/mp4">
                    </video>
                </div>
                <div *ngIf="viewFileActivity" class="fw fh pdt10">
                    <ngx-extended-pdf-viewer *ngIf="viewFileActivity" [showToolbar]="false" [base64Src]="selectedClase?.archivos[0]?.base64" [useBrowserLocale]="true" height="90%"></ngx-extended-pdf-viewer>
                </div>
            
                <div *ngIf="!viewFileActivity && !viewVideoActivity" fxLayout="column" fxLayoutAlign="center center" class="fw fh">
                    <img  class="pd10" src="../../../assets/images/cursos/Next steps-pana.svg" class="fw" alt="Mi SVG">
                </div>
            </div>
        </div>
        <div fxLayout="row" fxLayoutAlign="space-between center" class="mgt10">
            <!-- Botón a la izquierda -->
            <button  (click)="activeStepActividad >1 ? activeStepActividad = activeStepActividad-1 : modal.dismiss() " class="blueButton radius4 ft12 h28px mgr10 gray-1" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                <img [src]="icon.chevronLeft" class="h16px pdr05 makeWhite" alt="">
                Regresar
            </button>        
            <!-- Contenedor para los dos botones de la derecha -->
            <div fxLayout="row" fxLayoutGap="10px">               
                <button *ngIf="activeStepActividad<=2" class="blueButton radius4 ft12 h28px mgr10 gray-1" (click)="advanceTabActividad();" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                    Continuar
                    <img [src]="icon.chevronRight" class="h16px pdl05 makeWhite" alt="">
                </button>
                <button (click)="modal.dismiss()" *ngIf="activeStepActividad==3" class="blueButton radius4 ft12 h28px mgr10 gray-1" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                    Continuar
                    <img [src]="icon.chevronRight" class="h16px pdl05 makeWhite" alt="">
                </button>        
            </div>
        </div>
    </div>
</ng-template>

<!-- CLASE COMPETENCIAS MODAL -->
<ng-template #modalAsignarCompetenciasClases let-modal>
    <div class="modal-header bg-web-primary text-white px-3 py-1">
        <div class="modal-title pd10" fxLayout="row" fxLayoutAlign="start center">
            <img [src]="icon.flash" class="h18px pdr05" alt="">
            <span class="ft16 ft600 gray-10">Asignar nuevas competencias</span>
        </div>
        <img style="cursor: pointer;" [src]="icon.close" (click)="modal.dismiss('Cross click')" class="h20px"  alt="">
    </div>
    <div class="modal-body">
        <div *ngIf="selectedClase.tipo == 'actividad'" fxLayout="row">
            <div class="fw pdl10 pdr10 pdt10">
                <div class="fw">
                    <div class="stepper pdb10">
                        <div class="step" *ngFor="let item of stepsCompetencias; let i = index">
                            <div class= "no-select {{activeStepCompetencias == i+1? 'circleStepActive': 'circleStep'}} {{  activeStepCompetencias > i ? 'cursorPointer' : ''}}">{{ i + 1 }}</div>
                            <div (click)="activeStepCompetencias > i ? activeStepCompetencias=i+1 : '' " class="no-select {{activeStepCompetencias == i+1? 'titleActive ft400': 'title'}}  {{  activeStepCompetencias > i ? 'cursorPointer' : ''}}">{{ item }}</div>
                            <div class="mgr05" *ngIf="i < stepsCompetencias.length - 1">
                                <img [src]="icon.chevronRight" class=" {{activeStepCompetencias == i+1? 'makeGray8': 'makeGray'}}" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div fxLayout="column" class="fw pdt10">
            <ng-container *ngIf="activeStepCompetencias ==1">
                <div *ngFor="let categoria of competenciasSelectedClase" fxLayout="column" class="fw pdb10">
                    <!-- Contenedor para la categoría y el ícono -->
                    <div fxLayout="row" class="category-container">
                        <span class="ft400 pdb03 flex-fill">
                            <!-- {{categoria|json}} -->
                            {{categoria.categoria?.name ? categoria.categoria.name: categoria.name | titlecase}}
                            ({{categoria.competencias.length}})
                        </span>
                        <!-- Asumiendo que deseas agregar un ícono aquí -->
                        <img *ngIf="categoria['expanded']" (click)="categoria['expanded'] = !categoria['expanded'];" [src]="icon.chevronUp" class="h16px pdr05 cursorPointer" alt="">
                        <img *ngIf="!categoria['expanded']" (click)="categoria['expanded'] = !categoria['expanded'];" [src]="icon.chevronDown" class="h16px pdr05 cursorPointer" alt="">
                    </div>
                    <!-- Displaying Chips -->
                    <mat-chip-listbox *ngIf="categoria['expanded']" selectable multiple aria-label="Fish selection" class="fw contenedor-chips pdt05" style="max-height: 100vh !important;">
                        <mat-chip-option class="custom-chip" *ngFor="let competencia of categoria.competencias" (click)="competencia.selected = !competencia.selected;getSelectedCategoriasCompetencias()" [selected]="competencia.selected">
                            {{competencia.name | titlecase}}
                            <img *ngIf="competencia.selected" [src]="icon.close" class="makeWhite h16px pdl05" alt="">
                            <img *ngIf="!competencia.selected" [src]="icon.addNew" class="makeGray h14px pdl05" alt="">
                        </mat-chip-option>
                    </mat-chip-listbox>
                </div>
            </ng-container>
            <ng-container *ngIf="activeStepCompetencias == 2">
                <!-- aqui van los preguntas que se van creando -->
                <div *ngFor="let question of  selectedClase.activity.questions; let questionIndex = index" class="{{question['isInvalid']?'ContainerModuloInvalid':'ContainerModulo'}}">
                    <div fxLayout="row" fxLayoutAlign="space-between start" class="fw pd05 pdb0">
                        <div fxLayout="row" fxLayoutGap="10px" class="fw">
                            <div class="ft500 ft12">
                                <!-- numero pregunta -->
                                Pregunta {{questionIndex+1}}
                            </div>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="space-between start" class="fw pd05 pdb10">

                        <div fxLayout="column" class="fw">
                            <!-- Contenedor para la categoría y el ícono -->
                            <div fxLayout="row" class="category-container">
                                <span class="ft400 pdb03 flex-fill">
                                    Competencias
                                </span>
                                <!-- Asumiendo que deseas agregar un ícono aquí -->
                                <img *ngIf="question['expanded_categorias']" (click)="question['expanded_categorias'] = !question['expanded_categorias'];" [src]="icon.chevronUp" class="h16px pdr05 cursorPointer" alt="">
                                <img *ngIf="!question['expanded_categorias']" (click)="question['expanded_categorias'] = !question['expanded_categorias'];" [src]="icon.chevronDown" class="h16px pdr05 cursorPointer" alt="">
                            </div>
                        </div>

                    </div>
                    <!-- contenedor de competencias -->
                    <div *ngIf="question['expanded_categorias']" fxLayout="row" fxLayoutAlign="space-between start" class="fw pd05 pdb0">
                        <div fxLayout="column" class="fw pdl10">
                            <div *ngFor="let categoria of question['competencias_tmp']" fxLayout="column" class="fw pdb10">
                                <!-- Contenedor para la categoría y el ícono -->
                                <div fxLayout="row" class="category-container">
                                    <span class="ft400 pdb03 flex-fill">
                                        {{categoria.categoria?.name ? categoria.categoria.name: categoria.name | titlecase}}
                                        ({{categoria.competencias.length}})
                                    </span>
                                    <!-- Asumiendo que deseas agregar un ícono aquí -->
                                    <img *ngIf="categoria['expanded']" (click)="categoria['expanded'] = !categoria['expanded'];" [src]="icon.chevronUp" class="h16px pdr05 cursorPointer" alt="">
                                    <img *ngIf="!categoria['expanded']" (click)="categoria['expanded'] = !categoria['expanded'];" [src]="icon.chevronDown" class="h16px pdr05 cursorPointer" alt="">
                                </div>
                                <!-- Displaying Chips -->
                                <mat-chip-listbox *ngIf="categoria['expanded']" selectable multiple aria-label="Fish selection" class="fw contenedor-chips pdt05" style="max-height: 100vh !important;">
                                    <mat-chip-option class="custom-chip" *ngFor="let competencia of categoria.competencias" (click)="competencia.selected = !competencia.selected;" [selected]="competencia.selected">
                                        {{competencia.name | titlecase}}
                                        <img *ngIf="competencia.selected" [src]="icon.close" class="makeWhite h16px pdl05" alt="">
                                        <img *ngIf="!competencia.selected" [src]="icon.addNew" class="makeGray h14px pdl05" alt="">
                                    </mat-chip-option>
                                </mat-chip-listbox>
                            </div>
                        </div>
                    </div>
                    <!-- Contenedor de las preguntas -->
                    <div class="pd05">
                        <div fxLayout="row" fxLayoutAlign="space-between center">
                            <div fxLayout="row" fxLayoutGap="0.625">
                                <div class="pdr05">
                                    {{ question.type.displayName }}
                                </div>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="10px">
                                <label>Puntos:</label>
                                <span>{{question.points}}</span>
                            </div>
                        </div>
                        <!-- imagen -->
                        <div fxLayout="row" fxLayoutAlign="start center" class="pdt10">
                            <img [src]="question.image" alt="" style="max-height: 200px;">
                        </div>
                        <!-- area dependiete de la pregunta -->
                        <div fxLayout="row" class="pdt05 fw">
                            <div [innerHTML] ="question['render']" *ngIf="question.type.value == 'complete'"></div>
                            <div *ngIf="question.type.value == 'single_choice'">
                                <span class="ft14 ft500"> {{ question.text }} </span>
                                <div class="mgt10" fxLayout="column">
                                    <div fxLayout="row" fxLayoutAlign="space-between center"
                                        *ngFor="let option of question.options; let optionIndex = index" class="mgt05">
                                        <span class="pdr05">{{ optionIndex + 1 }}. {{ option.text }}</span>
                                        <input type="radio" [name]="questionIndex" />
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="question.type.value == 'multiple_choice'">
                                <span class="ft14 ft500"> {{ question.text }} </span>
                                <div class="mgt10" fxLayout="column">
                                    <div fxLayout="row" fxLayoutAlign="space-between center" *ngFor="let option of question.options; let optionIndex = index" class="mgt05">
                                        <span class="pdr05" >{{ optionIndex + 1 }}. {{ option.text }}</span>
                                        <input type="checkbox"/>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="question.type.value == 'true-false'">
                                <span class="ft14 ft500"> {{ question.text }} </span>
                                <div class="mgt10" fxLayout="column">
                                    <div fxLayout="row" fxLayoutAlign="space-between center">
                                        <span fxFlex="60" class="ft14 ft500">Enunciado</span>
                                        <div class="centertext w200px">
                                            <span fxFlex="50" class="ft14 ft500">V</span>
                                            <span fxFlex="50" class="ft14 ft500">F</span>
                                        </div>
                                    </div>
                                    <div fxLayout="row" fxLayoutAlign="space-between center" class="mgt05" *ngFor="let option of question.options; let optionIndex = index">
                                        <div fxFlex="60" fxLayout="row" fxLayoutGap="1rem">
                                            <span>{{ optionIndex + 1 }}. {{ option.text }}</span>
                                        </div>
                                        <div class="centertext w200px">
                                            <input fxFlex="50" [name]="questionIndex.toString() + optionIndex.toString()" type="radio" [value]="true">
                                            <input fxFlex="50" [name]="questionIndex.toString() + optionIndex.toString()" type="radio" [value]="false" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>
        </div>
    </div>
    <div class="modal-footer">
        <button (click)="modal.dismiss()" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
            Cancelar
        </button>  
        <button *ngIf="selectedClase.tipo!='actividad'" (click)="saveCompetenciasClase()" class="blueButton radius4 ft12 h28px mgr10 gray-1" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
            <img [src]="icon.save" class="h16px pdr05 makeWhite" alt="">
            Guadar
        </button>
        <ng-container *ngIf="selectedClase.tipo=='actividad'">

            <!-- <button *ngIf="activeStepCompetencias<2" class="blueButton radius4 ft12 h28px mgr10 gray-1" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                <img [src]="icon.chevronRight" class="h16px pdr05 makeWhite" alt="">
            </button>    -->
            <button *ngIf="activeStepCompetencias<2" (click)="advanceTabCompetencia()"  class="blueButton radius4 ft12 h28px mgr10 gray-1" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                Continuar
                <img [src]="icon.chevronRight" class="h16px pdl05 makeWhite" alt="">
            </button>
            <!-- <button *ngIf="activeStepCompetencias==2" (click)="saveCompetenciasActividad()" class="blueButton radius4 ft12 h28px mgr10 gray-1" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                <img [src]="icon.save" class="h16px pdr05 makeWhite" alt="">
                Guadar
            </button> -->
        </ng-container>
    </div>
</ng-template>

<ng-template #modalCrearInstructor let-modal>
    <div class="modal-header bg-web-primary text-white px-3 py-1">
      <div class="modal-title pd10" fxLayout="row" fxLayoutAlign="start center">
        <span class="ft16 ft500 gray-10">Crear Instructor</span>
      </div>
      <img style="cursor: pointer;" [src]="icon.close" (click)="modal.dismiss('Cross click')" class="h20px" alt="">
    </div>
    <div class="modal-body" style="overflow-y: auto; max-height: 80vh;">
        <form [formGroup]="formNewInstructor" class="mgr20">
            <div class="form-group">
                <label>Nombre del instructor</label>
                <input formControlName="nombre" [class.is-invalid]="formNewInstructor.controls['nombre'].errors && showErrorInstructor" type="text" class="form-control customInput" placeholder="Escriba el nombre del instructor del curso aquí">
                <div class="invalid-feedback" *ngIf="formNewInstructor.controls['nombre'].errors && showErrorInstructor"> 
                    Debe indicar el nombre del instructor.
                </div>
            </div>

            <div class="form-group">
                <label>Correo del instructor</label>
                <input formControlName="email" [class.is-invalid]="formNewInstructor.controls['email'].errors && showErrorInstructor" type="text" class="form-control customInput" placeholder="Escriba el correo del instructor del curso aquí">
                <div class="invalid-feedback" *ngIf="formNewInstructor.controls['email'].errors?.required && showErrorInstructor"> 
                    Debe indicar el correo del instructor.
                </div>
                <div class="invalid-feedback" *ngIf="formNewInstructor.controls['email'].errors?.email && showErrorInstructor"> 
                    El correo es invalido.
                </div>
            </div>


            <div class="form-group pdt10">
                <label>Resumen del instructor</label>
                <textarea rows="3" [class.is-invalid]="formNewInstructor.controls['resumen'].errors && showErrorInstructor"  formControlName="resumen" type="text" class="form-control customInput" placeholder="Escriba el resumen del instructor aquí." style="resize: none;"></textarea>
                <div class="invalid-feedback" *ngIf="formNewInstructor.controls['resumen'].errors && showErrorInstructor"> 
                    Debe indicar el resumen del instructor.
                </div>
            </div>
            <div class="form-group pdt10">
                <label>Foto del instructor</label>
                <div class="avatar-selector">
                    <button (click)="instructorImage.click()" class="grayButton radius4 ft12 h28px mgr10 gray-8" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                        <img [src]="icon.arrowUp" class="h16px pdr05" alt="">
                        Adjuntar imagen
                    </button>
                    <input #instructorImage type="file" (change)="uploadCourseImage($event,'instructor',true)" hidden accept="image/jpeg, image/png" />
                    <div class="avatar-scroll">
                        <img *ngIf="formNewInstructor.get('foto').value" [src]="formNewInstructor.get('foto').value" alt="Imagen seleccionada" class="image shadow8">
                    </div>
                </div>
                <div *ngIf="formNewInstructor.controls['foto'].errors && showErrorInstructor" class="custom-invalid-feedback pdt05">
                    Debe seleccinar o subir la imagen del instructor
                </div>
            </div>
        </form>
        <!-- Botón de guardar en la esquina inferior derecha -->
        <div fxLayout="row" fxLayoutAlign="end" class="pdt03">
            <button (click)="crearInstructor()" class="blueButton radius4 ft12 h28px mgr10 gray-1" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                <img [src]="icon.save" class="h16px pdr05 makeWhite" alt="">
                Guardar Instructor
            </button>
        </div>
    </div>
</ng-template>
<ng-template #modalSkillsCourse let-modal>
    <div class="modal-header bg-web-primary text-white px-3 py-1">
      <div class="modal-title pd10" fxLayout="row" fxLayoutAlign="start center">
        <span class="ft16 ft500 gray-10">Asignar competencias</span>
      </div>
      <img style="cursor: pointer;" [src]="icon.close" (click)="modal.dismiss('Cross click')" class="h20px" alt="">
    </div>
    <div class="modal-body" style="overflow-y: auto; max-height: 80vh;">
        {{pillarsForm.value['name']}}
        <div fxLayout="column">
            <div fxLayout="row">
                <div class="skills-container">
                    <ng-container *ngFor="let skill of pillarsForm.value['competencias'] ? (pillarsForm.value['competencias'] | sortSkills:'name') : []; let indexSkill = index">
                        <div (click)="troggleSkill(skill)"
                            style="display: inline-block; margin-right: 5px; margin-bottom: 5px;"
                            class="skill-badge-complete  radius10 {{courseHasSkill(skill)?'ListHoverBlue gray-1':'ListHover2 gray-8'}} pdl05 pdr05 mgt05 no-select cursorPointer">
                            {{skill.name}}
                        </div>
                    </ng-container>
                    <div (click)="crearCompetencia(modalCrearSkill)" matTooltip="Crear competencia"
                        style="display: inline-block; margin-right: 5px; margin-bottom: 5px;" class="skill-badge ListHover2 radius10 backGray2 pdl05 pdr05 gray-8 mgt05">
                        +
                    </div>
                </div>
            </div>
        </div>
        

        <!-- Botón de guardar en la esquina inferior derecha -->
        <div fxLayout="row" fxLayoutAlign="end" class="pdt03">
            <button (click)="saveNewSkills()" class="blueButton radius4 ft12 h28px mgr10 gray-1" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                <img [src]="icon.save" class="h16px pdr05 makeWhite" alt="">
                Confirmar
            </button>
        </div>
    </div>
</ng-template>


<ng-template #modalCrearSkill let-modal>
    <div class="modal-header bg-web-primary text-white px-3 py-1">
      <div class="modal-title pd10" fxLayout="row" fxLayoutAlign="start center">
        <span class="ft16 ft500 gray-10">Crear competencia</span>
      </div>
      <img style="cursor: pointer;" [src]="icon.close" (click)="modal.dismiss('Cross click')" class="h20px" alt="">
    </div>
    <div class="modal-body" style="overflow-y: auto; max-height: 80vh;">
        <form [formGroup]="formNewSkill" class="fw">
            <div fxLayout="row" class="fw">
                <div class="form-group fw">
                    <label>Nombre de la competencia</label>
                    <input formControlName="nombre" [class.is-invalid]="formNewSkill.controls['nombre'].errors && showErrorSkill" type="text" class="form-control customInput" placeholder="Escriba el nombre de la competencia">
                    <div class="invalid-feedback" *ngIf="formNewSkill.controls['nombre'].errors && showErrorSkill">
                        Debe indicar el nombre de la competencia.
                    </div>
                </div>
            </div>
        </form>
        <!-- Botón de guardar en la esquina inferior derecha -->
        <div fxLayout="row" fxLayoutAlign="end end" class="pdt03" style="width: 100%;">
            <button (click)="saveNewSkill()" class="blueButton gray-1 radius4 ft12 h28px mgt10" fxLayout="row" fxLayoutGap="0.625rem" fxLayoutAlign="center center">
                <img [src]="icon.save" class="h16px pdr05 makeWhite" alt="">
                Guardar competencia
            </button>
        </div>
    </div>
    
</ng-template>




<ng-template #modalCrearPilar let-modal>
    <div class="modal-header bg-web-primary text-white px-3 py-1">
      <div class="modal-title pd10" fxLayout="row" fxLayoutAlign="start center">
        <span class="ft16 ft500 gray-10">Crear Pilar</span>
      </div>
      <img style="cursor: pointer;" [src]="icon.close" (click)="modal.dismiss('Cross click')" class="h20px" alt="">
    </div>
    <div class="modal-body" style="overflow-y: auto; max-height: 80vh;">


        <form [formGroup]="formNewPillar" class="fw">
            <div fxLayout="row" class="fw">
                <div class="form-group fw">
                    <label>Nombre del pilar</label>
                    <input formControlName="nombre" [class.is-invalid]="formNewPillar.controls['nombre'].errors && showErrorPillar" type="text" class="form-control customInput" placeholder="Escriba el nombre del pilar">
                    <div class="invalid-feedback" *ngIf="formNewPillar.controls['nombre'].errors && showErrorPillar"> 
                        Debe indicar el nombre del pilar.
                    </div>
                </div>
            </div>
            <!-- <div fxLayout="row" class="fw" fxLayoutAlign="start center" fxLayoutGap="10px">
                <div class="form-group" fxFlex>
                    <label>Agregar Competencia</label>
                    <input formControlName="skillTmp"  [class.is-invalid]="formNewPillar.controls['skillTmp'].errors && showErrorPillarSkill" type="text" class="form-control customInput" placeholder="Escriba de la competencia">
                </div>
                <div class="invalid-feedback" *ngIf="formNewPillar.controls['skillTmp'].errors && showErrorPillarSkill"> 
                    Debe indicar el nombre de la competencia.
                </div>
                <button (click)="addSkill()" class="blueButton radius4 ft12 h28px mgr10 gray-1 mgt15">
                    Agregar
                </button>
            </div> -->
            <!-- <div>
                <div class="skills-container">
                    <ng-container *ngFor="let skill of formNewPillar.get('skills')?.value; let indexSkill = index">
                        <div
                            style="display: inline-block; margin-right: 5px; margin-bottom: 5px;"
                            class="skill-badge-complete ListHover2 radius10 backGray2 pdl05 pdr05 gray-8 mgt05">
                            {{skill}}
                            <img (click)="removeSkillTmp(skill)" style="cursor: pointer;"  [src]="icon.close"  class="h16px"  alt="">
                        </div>
                    </ng-container>
                </div>
            </div> -->
        </form>


        
        <!-- Botón de guardar en la esquina inferior derecha -->
        <div fxLayout="row" fxLayoutAlign="end" class="pdt03">
            <button (click)="!savingPillar?saveNewPillar():''" class="{{!savingPillar?'blueButton gray-1':'grayButton gray-8 '}} radius4 ft12 h28px mgt08" fxLayout="row" fxLayoutGap="0.625" fxLayoutAlign="center center">
                <img [src]="icon.save" class="h16px = makeWhite" alt="">
                Guardar Pilar
            </button>
        </div>
    </div>
</ng-template>